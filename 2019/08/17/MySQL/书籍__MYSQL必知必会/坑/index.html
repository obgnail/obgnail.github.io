<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=" id=&quot;创建表时-最后一个字段不能添加逗号&quot;&gt;&lt;a href=&quot;#创建表时-最后一个字段不能添加逗号&quot; class=&quot;headerlink&quot; title=&quot;创建表时,最后一个字段不能添加逗号&quot;&gt;&lt;/a&gt;创建表时,最后一个字段不能添加逗号&lt;/h3&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;create table class&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	cid int primary key,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	caption varchar(15)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ENGINE=InnoDB default charset=utf8;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&quot;MySQL创建外键方法不同于其他数据库&quot;&gt;&lt;a href=&quot;#MySQL创建外键方法不同于其他数据库&quot; class=&quot;headerlink&quot; title=&quot;MySQL创建外键方法不同于其他数据库&quot;&gt;&lt;/a&gt;MySQL创建外键方法不同于其他数据库&lt;/h3&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# MySQL&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;create table student&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	sid int primary key ,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	sname varchar(10),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	gender varchar(4) check(gender=&amp;#x27;男&amp;#x27; or gender=&amp;#x27;女&amp;#x27;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	class_id int,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	foreign key (class_id) references class(cid) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;engine=InnoDB default charset=utf8;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/* SQL Server */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;create table student&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	sid int primary key ,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	sname varchar(10),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	gender varchar(4) check(gender=&amp;#x27;男&amp;#x27; or gender=&amp;#x27;女&amp;#x27;),&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	class_id int foreign key  references class(cid) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;engine=InnoDB default charset=utf8;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;ol&gt;
&lt;li&gt;不能使用&lt;code&gt;class_id int foreign key  references class(cid) &lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;foreign key (class_id) references class(cid) &lt;/code&gt;中的class_id必须添加括号&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;MySQL使用check的时候不能添加Not-null&quot;&gt;&lt;a href=&quot;#MySQL使用check的时候不能添加Not-null&quot; class=&quot;headerlink&quot; title=&quot;MySQL使用check的时候不能添加Not null&quot;&gt;&lt;/a&gt;MySQL使用check的时候不能添加Not null&lt;/h3&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;# wrong&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gender varchar(4) check(gender=&amp;#x27;男&amp;#x27; or gender=&amp;#x27;女&amp;#x27;) not null,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;# right&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gender varchar(4) check(gender=&amp;#x27;男&amp;#x27; or gender=&amp;#x27;女&amp;#x27;) ,&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h3 id=&quot;使用where-sid-in-select-…-代替join操作&quot;&gt;&lt;a href=&quot;#使用where-sid-in-select-…-代替join操作&quot; class=&quot;headerlink&quot; title=&quot;使用where sid in (select … )代替join操作&quot;&gt;&lt;/a&gt;使用where sid in (select … )代替join操作&lt;/h3&gt;&lt;p&gt;查询没学过“波多”老师课的同学的学号、姓名；"><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><title>坑 | 凉薄的自动书记人偶</title><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Hexo 5.4.0"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Tags</a><a class="sidebar-nav-item" href="/About">About</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/MySQL/" rel="tag">MySQL</a></div><div class="post-time">2019-08-17</div></div></div><div class="container post-header"><h1>坑</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6-%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5%E4%B8%8D%E8%83%BD%E6%B7%BB%E5%8A%A0%E9%80%97%E5%8F%B7"><span class="toc-number">1.</span> <span class="toc-text">创建表时,最后一个字段不能添加逗号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL%E5%88%9B%E5%BB%BA%E5%A4%96%E9%94%AE%E6%96%B9%E6%B3%95%E4%B8%8D%E5%90%8C%E4%BA%8E%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.</span> <span class="toc-text">MySQL创建外键方法不同于其他数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL%E4%BD%BF%E7%94%A8check%E7%9A%84%E6%97%B6%E5%80%99%E4%B8%8D%E8%83%BD%E6%B7%BB%E5%8A%A0Not-null"><span class="toc-number">3.</span> <span class="toc-text">MySQL使用check的时候不能添加Not null</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8where-sid-in-select-%E2%80%A6-%E4%BB%A3%E6%9B%BFjoin%E6%93%8D%E4%BD%9C"><span class="toc-number">4.</span> <span class="toc-text">使用where sid in (select … )代替join操作</span></a></li></ol></details></div><div class="container post-content"><h3 id="创建表时-最后一个字段不能添加逗号"><a href="#创建表时-最后一个字段不能添加逗号" class="headerlink" title="创建表时,最后一个字段不能添加逗号"></a>创建表时,最后一个字段不能添加逗号</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table class</span><br><span class="line">(</span><br><span class="line">	cid int primary key,</span><br><span class="line">	caption varchar(15)</span><br><span class="line">)</span><br><span class="line">ENGINE=InnoDB default charset=utf8;</span><br></pre></td></tr></table></figure>



<h3 id="MySQL创建外键方法不同于其他数据库"><a href="#MySQL创建外键方法不同于其他数据库" class="headerlink" title="MySQL创建外键方法不同于其他数据库"></a>MySQL创建外键方法不同于其他数据库</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># MySQL</span><br><span class="line">create table student</span><br><span class="line">(</span><br><span class="line">	sid int primary key ,</span><br><span class="line">	sname varchar(10),</span><br><span class="line">	gender varchar(4) check(gender=&#x27;男&#x27; or gender=&#x27;女&#x27;),</span><br><span class="line">	class_id int,</span><br><span class="line">	foreign key (class_id) references class(cid) </span><br><span class="line">)</span><br><span class="line">engine=InnoDB default charset=utf8;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/* SQL Server */</span><br><span class="line">create table student</span><br><span class="line">(</span><br><span class="line">	sid int primary key ,</span><br><span class="line">	sname varchar(10),</span><br><span class="line">	gender varchar(4) check(gender=&#x27;男&#x27; or gender=&#x27;女&#x27;),</span><br><span class="line">	class_id int foreign key  references class(cid) </span><br><span class="line">)</span><br><span class="line">engine=InnoDB default charset=utf8;</span><br></pre></td></tr></table></figure>

<ol>
<li>不能使用<code>class_id int foreign key  references class(cid) </code></li>
<li><code>foreign key (class_id) references class(cid) </code>中的class_id必须添加括号</li>
</ol>
<h3 id="MySQL使用check的时候不能添加Not-null"><a href="#MySQL使用check的时候不能添加Not-null" class="headerlink" title="MySQL使用check的时候不能添加Not null"></a>MySQL使用check的时候不能添加Not null</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># wrong</span><br><span class="line">gender varchar(4) check(gender=&#x27;男&#x27; or gender=&#x27;女&#x27;) not null,</span><br><span class="line"></span><br><span class="line"># right</span><br><span class="line">gender varchar(4) check(gender=&#x27;男&#x27; or gender=&#x27;女&#x27;) ,</span><br></pre></td></tr></table></figure>



<h3 id="使用where-sid-in-select-…-代替join操作"><a href="#使用where-sid-in-select-…-代替join操作" class="headerlink" title="使用where sid in (select … )代替join操作"></a>使用where sid in (select … )代替join操作</h3><p>查询没学过“波多”老师课的同学的学号、姓名；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select sid,sname from student where sid not in (</span><br><span class="line"></span><br><span class="line">	select DISTINCT student_id from score where corse_id in (</span><br><span class="line"></span><br><span class="line">		select cid from course join teacher on teacher.tid = course.teach_id where tname = &#x27;波多&#x27;</span><br><span class="line">		)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>不要总是使用<code>join</code>,然后再来查询.</p>
<p>可以使用<code>where sid in (select ... )</code></p>
</blockquote>
</div></div></article><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>