<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=" id=&quot;Docker-安装&quot;&gt;&lt;a href=&quot;#Docker-安装&quot; class=&quot;headerlink&quot; title=&quot;Docker 安装&quot;&gt;&lt;/a&gt;Docker 安装&lt;/h2&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1.卸载 Docker&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum remove docker docker-client docker-client-latest docker-common docker-latest  docker-latest-logrotate docker-logrotate docker-selinux docker-engine-selinux docker-engine&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2.安装所需的包&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum install -y yum-utils device-mapper-persistent-data lvm2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3.设置稳定的存储库&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4.可选：启用边缘和测试存储库&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum-config-manager --enable docker-ce-edge&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum-config-manager --enable docker-ce-test&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;禁用边缘存储库&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum-config-manager --disable docker-ce-edge&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5.安装最新版本的 Docker CE&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo yum install docker-ce&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6.启动 Docker&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo systemctl start docker&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7.通过运行 hello-world 映像验证是否已正确安装&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo docker run hello-world&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;



&lt;h2 id=&quot;docker-compose-安装&quot;&gt;&lt;a href=&quot;#docker-compose-安装&quot; class=&quot;headerlink&quot; title=&quot;docker-compose 安装&quot;&gt;&lt;/a&gt;docker-compose 安装&lt;/h2&gt;&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1.下载最新版本的 Docker Compose (第一次执行提示失败，就多执行几次这个命令试试)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo curl -L https://github.com/docker/compose/releases/download/1.21.2/docker-compose-$(uname -s)-$(uname -m) -o /usr/local/bin/docker-compose&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2.对二进制文件应用可执行权限&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sudo chmod +x /usr/local/bin/docker-compose&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3.测试安装&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;docker-compose --version&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;也可以下载到本地然后使用"><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><title>docker相关安装 | 凉薄的自动书记人偶</title><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Hexo 5.4.0"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-none-link" href="/tags/Docker/" rel="tag">Docker</a></div><div class="post-time">2019-12-01</div></div></div><div class="container post-header"><h1>docker相关安装</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-%E5%AE%89%E8%A3%85"><span class="toc-number">1.</span> <span class="toc-text">Docker 安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#docker-compose-%E5%AE%89%E8%A3%85"><span class="toc-number">2.</span> <span class="toc-text">docker-compose 安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#docker-machine-%E5%AE%89%E8%A3%85"><span class="toc-number">3.</span> <span class="toc-text">docker-machine 安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA-swarm-%E9%9B%86%E7%BE%A4"><span class="toc-number">4.</span> <span class="toc-text">搭建 swarm 集群</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-swarm-compose-%E9%83%A8%E7%BD%B2%E9%9B%86%E7%BE%A4%E6%9C%8D%E5%8A%A1"><span class="toc-number">5.</span> <span class="toc-text">使用 swarm+compose 部署集群服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96-Docker-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">6.</span> <span class="toc-text">其他 Docker 常用命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-Docker-%E5%8A%A0%E9%80%9F%E5%99%A8"><span class="toc-number">7.</span> <span class="toc-text">配置 Docker 加速器</span></a></li></ol></details></div><div class="container post-content"><h2 id="Docker-安装"><a href="#Docker-安装" class="headerlink" title="Docker 安装"></a>Docker 安装</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">1.卸载 Docker</span><br><span class="line">sudo yum remove docker docker-client docker-client-latest docker-common docker-latest  docker-latest-logrotate docker-logrotate docker-selinux docker-engine-selinux docker-engine</span><br><span class="line"> </span><br><span class="line">2.安装所需的包</span><br><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"> </span><br><span class="line">3.设置稳定的存储库</span><br><span class="line">sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line"> </span><br><span class="line">4.可选：启用边缘和测试存储库</span><br><span class="line">sudo yum-config-manager --enable docker-ce-edge</span><br><span class="line">sudo yum-config-manager --enable docker-ce-test</span><br><span class="line">禁用边缘存储库</span><br><span class="line">sudo yum-config-manager --disable docker-ce-edge</span><br><span class="line"> </span><br><span class="line">5.安装最新版本的 Docker CE</span><br><span class="line">sudo yum install docker-ce</span><br><span class="line"> </span><br><span class="line">6.启动 Docker</span><br><span class="line">sudo systemctl start docker</span><br><span class="line"> </span><br><span class="line">7.通过运行 hello-world 映像验证是否已正确安装</span><br><span class="line">sudo docker run hello-world</span><br></pre></td></tr></table></figure>



<h2 id="docker-compose-安装"><a href="#docker-compose-安装" class="headerlink" title="docker-compose 安装"></a>docker-compose 安装</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.下载最新版本的 Docker Compose (第一次执行提示失败，就多执行几次这个命令试试)</span><br><span class="line">sudo curl -L https://github.com/docker/compose/releases/download/1.21.2/docker-compose-$(uname -s)-$(uname -m) -o /usr/local/bin/docker-compose</span><br><span class="line"> </span><br><span class="line">2.对二进制文件应用可执行权限</span><br><span class="line">sudo chmod +x /usr/local/bin/docker-compose</span><br><span class="line"> </span><br><span class="line">3.测试安装</span><br><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure>

<p>也可以下载到本地然后使用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp docker-compose-Linux-x86_64 root@106.15.94.49:/usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line">sudo chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure>



<h2 id="docker-machine-安装"><a href="#docker-machine-安装" class="headerlink" title="docker-machine 安装"></a>docker-machine 安装</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.下载 Docker Machine 二进制文件并将其解压缩到 PATH (第一次执行提示失败，就多执行几次这个命令试试)</span><br><span class="line">base=https://github.com/docker/machine/releases/download/v0.14.0 &amp;&amp; curl -L $base/docker-machine-$(uname -s)-$(uname -m) &gt;/tmp/docker-machine &amp;&amp; sudo install /tmp/docker-machine /usr/local/bin/docker-machine</span><br><span class="line"> </span><br><span class="line">2.通过显示机器版本来检查安装</span><br><span class="line">docker-machine version</span><br></pre></td></tr></table></figure>

<p>也可以下载到本地,然后使用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp docker-machine-Linux-x86_64  root@106.15.94.49:/tmp/docker-machine</span><br><span class="line">sudo install /tmp/docker-machine /usr/<span class="built_in">local</span>/bin/docker-machine</span><br><span class="line">docker-machine version</span><br></pre></td></tr></table></figure>



<h2 id="搭建-swarm-集群"><a href="#搭建-swarm-集群" class="headerlink" title="搭建 swarm 集群"></a>搭建 swarm 集群</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">1.新版 docker 已集成 swarm，无需单独安装</span><br><span class="line"> </span><br><span class="line">2.使用 docker swarm init 在管理节点初始化一个 Swarm 集群</span><br><span class="line">docker swarm init --advertise-addr 192.168.153.150</span><br><span class="line"># 如果你的 Docker 主机有多个网卡，拥有多个 IP，必须使用 --advertise-addr 指定 IP</span><br><span class="line"># 执行 docker swarm init 命令的节点自动成为管理节点</span><br><span class="line"> </span><br><span class="line">3.将其他主机作为 管理节点 或 工作节点 加入 swarm 集群（以下命令在待加入节点执行）</span><br><span class="line">docker swarm join --token [MANAGER-TOKEN||WORKER-TOKEN] [MANAGER-IP]:2377</span><br><span class="line"># 示例：docker swarm join --token SWMTKN-1-3pu6hszjas19xyp7ghgosyx9k8atbfcr8p2is99znpy26u2lkl-1awxwuwd3z9j1z3puu7rcgdbx 192.168.153.150:2377</span><br><span class="line">--------------</span><br><span class="line">注意：各机器之间要开启以下通信端口 或 关闭防火墙</span><br><span class="line"># TCP端口2377集群管理端口</span><br><span class="line"># TCP与 UDP端口7946节点之间通讯端口</span><br><span class="line"># TCP与 UDP端口4789 overlay 网络通讯端口</span><br><span class="line">firewall-cmd --zone=public --add-port=2377/tcp --permanent</span><br><span class="line">firewall-cmd --zone=public --add-port=7946/tcp --permanent</span><br><span class="line">firewall-cmd --zone=public --add-port=7946/udp --permanent</span><br><span class="line">firewall-cmd --zone=public --add-port=4789/tcp --permanent</span><br><span class="line">firewall-cmd --zone=public --add-port=4789/udp --permanent</span><br><span class="line">firewall-cmd --reload</span><br><span class="line">关闭防火墙：</span><br><span class="line">sudo systemctl stop firewalld.service</span><br><span class="line">sudo systemctl disable firewalld.service</span><br><span class="line">--------------</span><br><span class="line"> </span><br><span class="line">4.在管理节点使用 docker node ls 查看集群</span><br><span class="line">docker node ls</span><br><span class="line"> </span><br><span class="line">5.向集群中添加工作节点，通过以下命令获取加入集群的 WORKER-TOKEN</span><br><span class="line">docker swarm join-token worker</span><br><span class="line">向集群中添加管理节点，通过以下命令获取加入集群的 MANAGER-TOKEN</span><br><span class="line">docker swarm join-token manager</span><br><span class="line"> </span><br><span class="line">6.退出集群</span><br><span class="line">(1)如果是 manager 先降级为 worker </span><br><span class="line">docker node demote [HOSTNAME || ID] # ID前几位即可</span><br><span class="line">(2)退出集群</span><br><span class="line">docker swarm leave</span><br><span class="line">(3)移除节点</span><br><span class="line">docker node rm [HOSTNAME || ID] # ID前几位即可</span><br><span class="line"># leave后该节点仍将出现在节点列表中，并将 STATUS标记为 down，已不影响 swarm操作；</span><br><span class="line"># 要从列表中删除非活动节点，使用 node rm 命令即可。</span><br></pre></td></tr></table></figure>



<h2 id="使用-swarm-compose-部署集群服务"><a href="#使用-swarm-compose-部署集群服务" class="headerlink" title="使用 swarm+compose 部署集群服务"></a>使用 swarm+compose 部署集群服务</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.使用 swarm+compose 部署服务</span><br><span class="line">docker stack deploy -c docker-compose.yml [JIQUN-NAME]</span><br><span class="line"> </span><br><span class="line">2.查看服务</span><br><span class="line">docker stack ls</span><br><span class="line"> </span><br><span class="line">3.移除服务</span><br><span class="line">docker stack down [JIQUN-NAME]</span><br><span class="line"># 该命令不会移除服务所使用的 数据卷，如果你想移除数据卷请使用 docker volume rm</span><br></pre></td></tr></table></figure>



<h2 id="其他-Docker-常用命令"><a href="#其他-Docker-常用命令" class="headerlink" title="其他 Docker 常用命令"></a>其他 Docker 常用命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">查看 swarm 集群中的服务：docker service ls</span><br><span class="line">查看 swarm 集群中某个服务的运行状态信息：docker service ps mwp_db</span><br><span class="line">查看 swarm 集群中某个服务的基础详细信息：docker service inspect mwp_db</span><br><span class="line">查看 swarm 集群中某个服务的日志：docker service logs mwp_db</span><br><span class="line">从 swarm 集群中移除某个服务：docker service rm mwp_db</span><br><span class="line"> </span><br><span class="line">搜索仓库镜像：docker search nginx</span><br><span class="line">查找本地镜像：docker images nginx</span><br><span class="line">查看本地镜像列表：docker images 或 docker image ls</span><br><span class="line">删除本地镜像：docker rmi [IMAGE ID]</span><br><span class="line">强制删除本地镜像：docker rmi -f [IMAGE ID] # 一般先停止相关容器，再 docker rmi [IMAGE ID] 正常删除镜像</span><br><span class="line"> </span><br><span class="line">列出本机容器 container：docker ps -a 或 docker container ls</span><br><span class="line">删除 container：docker rm [CONTAINER ID] 或 docker container rm [CONTAINER ID]</span><br><span class="line">清理所有处于终止状态的容器：docker container prune</span><br><span class="line">进入后台运行的容器 container：docker exec -it [CONTAINER_NAME || CONTAINER_ID] /bin/sh</span><br><span class="line"># docker exec 进入容器后 exit 不会导致容器停止</span><br><span class="line">创建一个新的容器并运行：docker run --name web2 -d -p 81:80 nginx:v2</span><br><span class="line">停止一个运行中的容器：docker stop [CONTAINER ID || NAMES]</span><br><span class="line"> </span><br><span class="line">查看所有数据卷：docker volume ls</span><br><span class="line">删除指定数据卷：docker volume rm [VOLUME NAME]</span><br><span class="line">清理所有无主数据卷：docker volume prune</span><br><span class="line"> </span><br><span class="line">查看 Image 或 Container 的信息：docker inspect [IMAGE || IMAGE ID || CONTAINER ID]</span><br><span class="line"> </span><br><span class="line">查看 CentOS 系统内核版本：uname -r</span><br><span class="line"> </span><br><span class="line">使用 Dockerfile 定制镜像：docker build -t nginx:v3 [DOCKERFILE PATH || URL]</span><br><span class="line"># 其中 [DOCKERFILE PATH || URL] 为 Dockerfile 文件所在目录，例：docker build -t nginx:v3 .</span><br><span class="line"> </span><br><span class="line">更多命令可参考：http://www.runoob.com/docker/docker-command-manual.html</span><br></pre></td></tr></table></figure>



<h2 id="配置-Docker-加速器"><a href="#配置-Docker-加速器" class="headerlink" title="配置 Docker 加速器"></a>配置 Docker 加速器</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">参考：https://yeasy.gitbooks.io/docker_practice/install/mirror.html</span><br><span class="line">对于使用 systemd 的系统，在 /etc/docker/daemon.json 中写入如下内容（如果文件不存在则新建该文件）</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [</span><br><span class="line">    &quot;https://registry.docker-cn.com&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">之后重新启动服务。</span><br><span class="line">$ sudo systemctl daemon-reload</span><br><span class="line">$ sudo systemctl restart docker</span><br><span class="line">检查加速器是否生效：docker info</span><br><span class="line">Registry Mirrors:</span><br><span class="line"> https://registry.docker-cn.com/</span><br></pre></td></tr></table></figure>























</div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>