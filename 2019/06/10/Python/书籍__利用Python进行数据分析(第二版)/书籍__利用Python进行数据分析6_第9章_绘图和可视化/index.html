<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=" id=&quot;第9章-绘图和可视化&quot;&gt;&lt;a href=&quot;#第9章-绘图和可视化&quot; class=&quot;headerlink&quot; title=&quot;第9章 绘图和可视化&quot;&gt;&lt;/a&gt;第9章 绘图和可视化&lt;/h1&gt;&lt;p&gt;信息可视化（也叫绘图）是数据分析中最重要的⼯作之⼀。matplotlib是⼀个⽤于创建出版质量图表的桌⾯绘图包。"><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><title>利用Python进行数据分析6_第9章_绘图和可视化 | 凉薄的自动书记人偶</title><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Hexo 5.4.0"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Tags</a><a class="sidebar-nav-item" href="/About">About</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Python/" rel="tag">Python</a></div><div class="post-time">2019-06-10</div></div></div><div class="container post-header"><h1>利用Python进行数据分析6_第9章_绘图和可视化</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC9%E7%AB%A0-%E7%BB%98%E5%9B%BE%E5%92%8C%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-number">1.</span> <span class="toc-text">第9章 绘图和可视化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-matplotlib-API%E2%BC%8A%E2%BB%94"><span class="toc-number">1.1.</span> <span class="toc-text">9.1 matplotlib API⼊⻔</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-%E4%BD%BF%E2%BD%A4pandas%E5%92%8Cseaborn%E7%BB%98%E5%9B%BE"><span class="toc-number">1.2.</span> <span class="toc-text">9.2 使⽤pandas和seaborn绘图</span></a></li></ol></li></ol></details></div><div class="container post-content"><h1 id="第9章-绘图和可视化"><a href="#第9章-绘图和可视化" class="headerlink" title="第9章 绘图和可视化"></a>第9章 绘图和可视化</h1><p>信息可视化（也叫绘图）是数据分析中最重要的⼯作之⼀。matplotlib是⼀个⽤于创建出版质量图表的桌⾯绘图包。</p>
<p>matplotlib⽀持各种操作系统上许多不同的GUI后端，⽽且还能将图⽚导出为各种常⻅的⽮量（vector）和光栅（raster）图：PDF、SVG、JPG、PNG、BMP、GIF等。</p>
<h2 id="9-1-matplotlib-API⼊⻔"><a href="#9-1-matplotlib-API⼊⻔" class="headerlink" title="9.1 matplotlib API⼊⻔"></a>9.1 matplotlib API⼊⻔</h2><p>如果要在Jupyter notebook或ipython使用matplotlib,需要先做出声明:(matplotlib对Jupyter notebook和ipython做了接口优化)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Jupyter notebook</span></span><br><span class="line">%matplotlib	notebook</span><br><span class="line"></span><br><span class="line"><span class="comment"># ipython</span></span><br><span class="line">%matplotlib</span><br></pre></td></tr></table></figure>

<p>声明之后还需要导入matplotlib,matplotlib的通常引⼊约定是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br></pre></td></tr></table></figure>



<p>在Jupyter notebook输入</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">%matplotlib	notebook</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data = np.arange(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">plt.plot(data)</span><br></pre></td></tr></table></figure>

<p><img src="/images/1557474865190.png" alt="1557474865190"></p>
<p>Figure和Subplot</p>
<p><strong>matplotlib的图像都位于Figure对象中</strong>。<br>使用plt.figure创建⼀个新的Figure：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig = plt.figure()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建2*2的网格(即最多4张图),选中第一个子图</span></span><br><span class="line">ax1 = fig.add_subplot(<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">ax2 = fig.add_subplot(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">ax3 = fig.add_subplot(<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># fig.add_subplot返回的对象是AxesSubplot对象</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(ax1))</span><br><span class="line"><span class="comment"># &lt;class &#x27;matplotlib.axes._subplots.AxesSubplot&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># matplotlib就会在最后⼀个用过的subplot上进⾏绘制.</span></span><br><span class="line">plt.plot(np.random.randn(<span class="number">50</span>).cumsum(), <span class="string">&#x27;k--&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直方图</span></span><br><span class="line">_ = ax1.hist(np.random.randn(<span class="number">100</span>), bins=<span class="number">20</span>, color=<span class="string">&#x27;k&#x27;</span>, alpha=<span class="number">0.3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 散点图</span></span><br><span class="line">ax2.scatter(np.arange(<span class="number">30</span>), np.arange(<span class="number">30</span>) + <span class="number">3</span> * np.random.randn(<span class="number">30</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 展示图像</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p>注意:<br>matplotlib就会在最后⼀个⽤过的subplot上进⾏绘制.<br><img src="/images/1557537464786.png" alt="1557537464786"></p>
<p>matplotlib中的作图线的属性及设置方式</p>
<ul>
<li><p>颜色（color 简写为 c）：</p>
<ol>
<li>蓝色： ‘b’ (blue)</li>
<li>绿色： ‘g’ (green)</li>
<li>红色： ‘r’ (red)</li>
<li>蓝绿色(墨绿色)： ‘c’ (cyan)</li>
<li>红紫色(洋红)： ‘m’ (magenta)</li>
<li>黄色： ‘y’ (yellow)</li>
<li>黑色： ‘k’ (black)</li>
<li>白色： ‘w’ (white)</li>
<li>灰度表示： e.g. 0.75 ([0,1]内任意浮点数)</li>
<li>RGB表示法： e.g. ‘#2F4F4F’ 或 (0.18, 0.31, 0.31)</li>
<li>任意合法的html中的颜色表示： e.g. ‘red’, ‘darkslategray’</li>
</ol>
</li>
<li><p>线型（linestyle 简写为 ls）：</p>
<ol>
<li>实线： ‘-‘</li>
<li>虚线： ‘–’</li>
<li>点画线： ‘-.’</li>
<li>点线： ‘:’</li>
<li>点： ‘.’ </li>
</ol>
</li>
<li><p>图形标记（标记marker）：</p>
<ol>
<li>圆形： ‘o’</li>
<li>加号： ‘+’ </li>
<li>叉形： ‘x’</li>
<li>星型： ‘*’</li>
<li>方形： ‘s’</li>
</ol>
</li>
<li><p>图像标记、线宽及透明度：</p>
<ol>
<li>标记大小：markersize 简写为 ms</li>
<li>标记表面(内部)颜色：markerfacecolor 简写为 mfc </li>
<li>标记边缘宽度：markeredgewidth 简写为 mew</li>
<li>标记边缘颜色：markeredgecolor 简写为 mec</li>
<li>线宽：linewidth</li>
<li>透明度：alpha，[0,1]之间的浮点数</li>
</ol>
</li>
<li><p>设置线的属性的几种方式:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.直接在plt.plot()中使用&#x27;line properties&#x27;</span></span><br><span class="line">plt.plot(x, y, <span class="string">&#x27;r--&#x27;</span>)  <span class="comment"># 颜色线型总是组合在一起</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.运用关键字参数</span></span><br><span class="line">plt.plot(x, y, markersize=<span class="number">15</span>, marker=<span class="string">&#x27;d&#x27;</span>, markerfacecolor=<span class="string">&#x27;g&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.混合使用1 和 2</span></span><br><span class="line">plt.plot(x, y, <span class="string">&#x27;r--&#x27;</span>, markersize=<span class="number">15</span>, marker=<span class="string">&#x27;d&#x27;</span>, markerfacecolor=<span class="string">&#x27;g&#x27;</span>, linewidth=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>注意:颜色,线型,图形标记总是组合在一起:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(x, y, <span class="string">&#x27;ro--&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<p>上面创建子图的方法太麻烦了,可以使用<code>plt.subplots(2, 3)</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建⼀个新的Figure，并返回⼀个含有已创建的subplot对象的NumPy数组</span></span><br><span class="line"><span class="comment"># 创建2*3的网格</span></span><br><span class="line">fig, axes = plt.subplots(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(axes)</span><br><span class="line"><span class="comment"># [[&lt;matplotlib.axes._subplots.AxesSubplot object at 0x00000213BC9E22E8&gt;</span></span><br><span class="line"><span class="comment">#   &lt;matplotlib.axes._subplots.AxesSubplot object at 0x00000213BEF5C470&gt;</span></span><br><span class="line"><span class="comment">#   &lt;matplotlib.axes._subplots.AxesSubplot object at 0x00000213BEF81AC8&gt;]</span></span><br><span class="line"><span class="comment">#  [&lt;matplotlib.axes._subplots.AxesSubplot object at 0x00000213BEFB4198&gt;</span></span><br><span class="line"><span class="comment">#   &lt;matplotlib.axes._subplots.AxesSubplot object at 0x00000213BEFDB860&gt;</span></span><br><span class="line"><span class="comment">#   &lt;matplotlib.axes._subplots.AxesSubplot object at 0x00000213BF002EB8&gt;]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(fig)</span><br><span class="line"><span class="comment"># Figure(640x480)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(fig))</span><br><span class="line"><span class="comment"># &lt;class &#x27;matplotlib.figure.Figure&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(axes))</span><br><span class="line"><span class="comment"># &lt;class &#x27;numpy.ndarray&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line">axes[<span class="number">1</span>,<span class="number">1</span>].plot(np.random.randn(<span class="number">50</span>).cumsum(), <span class="string">&#x27;k--&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/1557537920132.png" alt="1557537920132"></p>
<p>pyplot.subplots的选项:</p>
<p><img src="/images/9613137.png" alt="9613137"></p>
<hr>
<p>调整subplot周围的间距</p>
<p>默认情况下，matplotlib会在subplot外围留下⼀定的边距，并在subplot之间留下⼀定的间距。</p>
<p>利⽤Figure的subplots_adjust方法修改间距:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">subplots_adjust(left=<span class="literal">None</span>, bottom=<span class="literal">None</span>, right=<span class="literal">None</span>, top=<span class="literal">None</span>,</span><br><span class="line">                wspace=<span class="literal">None</span>, hspace=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>

<p>wspace和hspace⽤于控制宽度和高度的百分⽐，可以⽤作subplot之间的间距。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># sharex共享x轴</span></span><br><span class="line">fig, axes = plt.subplots(<span class="number">2</span>, <span class="number">2</span>, sharex=<span class="literal">True</span>, sharey=<span class="literal">True</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>):</span><br><span class="line">        axes[i, j].hist(np.random.randn(<span class="number">500</span>), bins=<span class="number">50</span>, color=<span class="string">&#x27;k&#x27;</span>, alpha=<span class="number">0.5</span>)</span><br><span class="line">plt.subplots_adjust(wspace=<span class="number">0</span>, hspace=<span class="number">0</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/1557538437511.png" alt="1557538437511"></p>
<p>颜⾊、标记和线型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">data = np.random.randn(<span class="number">30</span>).cumsum()</span><br><span class="line">plt.plot(data, <span class="string">&#x27;r--&#x27;</span>, label=<span class="string">&#x27;Default&#x27;</span>)</span><br><span class="line">plt.plot(data, <span class="string">&#x27;k-&#x27;</span>, drawstyle=<span class="string">&#x27;steps-post&#x27;</span>, label=<span class="string">&#x27;steps-post&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 图例</span></span><br><span class="line">plt.legend(loc=<span class="string">&#x27;best&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/1557539262356.png" alt="1557539262356"></p>
<hr>
<p>基础设置:</p>
<ol>
<li><p>与 MATLAB 类似，使用 <code>axis</code> 函数指定坐标轴显示的范围：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.axis([xmin, xmax, ymin, ymax])</span><br></pre></td></tr></table></figure></li>
<li><p>使用 plt.plot() 的返回值来设置线条属性:<br><code>plot</code> 函数返回一个 <code>Line2D</code> 对象组成的列表，每个对象代表输入的一对组合:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加逗号 line 中得到的是 line2D 对象，不加逗号得到的是只有一个 line2D 对象的列表</span></span><br><span class="line">line, = plt.plot(np.random.randn(<span class="number">50</span>).cumsum(), <span class="string">&#x27;r--&#x27;</span>) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 将抗锯齿关闭</span></span><br><span class="line">line.set_antialiased(<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></li>
<li><p>plt.setp() 修改线条性质:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加逗号 line 中得到的是 line2D 对象，不加逗号得到的是只有一个 line2D 对象的列表</span></span><br><span class="line">lines = plt.plot(np.random.randn(<span class="number">50</span>).cumsum()) </span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用键值对</span></span><br><span class="line">plt.setp(lines, color=<span class="string">&#x27;r&#x27;</span>, linewidth=<span class="number">2.0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者使用 MATLAB 风格的字符串对</span></span><br><span class="line">plt.setp(lines, <span class="string">&#x27;color&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;linewidth&#x27;</span>, <span class="number">2.0</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>



<p>plt.setp(lines)的全部属性:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">agg_filter: unknown</span><br><span class="line">alpha: float (0.0 transparent through 1.0 opaque)         </span><br><span class="line">animated: [True | False]         </span><br><span class="line">antialiased or aa: [True | False]         </span><br><span class="line">axes: an :class:`~matplotlib.axes.Axes` instance         </span><br><span class="line">clip_box: a :class:`matplotlib.transforms.Bbox` instance         </span><br><span class="line">clip_on: [True | False]         </span><br><span class="line">clip_path: [ (:class:`~matplotlib.path.Path`,         :class:`~matplotlib.transforms.Transform`) |         :class:`~matplotlib.patches.Patch` | None ]         </span><br><span class="line">color or c: any matplotlib color         </span><br><span class="line">contains: a callable function         </span><br><span class="line">dash_capstyle: [&#x27;butt&#x27; | &#x27;round&#x27; | &#x27;projecting&#x27;]         </span><br><span class="line">dash_joinstyle: [&#x27;miter&#x27; | &#x27;round&#x27; | &#x27;bevel&#x27;]         </span><br><span class="line">dashes: sequence of on/off ink in points         </span><br><span class="line">drawstyle: [&#x27;default&#x27; | &#x27;steps&#x27; | &#x27;steps-pre&#x27; | &#x27;steps-mid&#x27; |                   &#x27;steps-post&#x27;]         </span><br><span class="line">figure: a :class:`matplotlib.figure.Figure` instance         </span><br><span class="line">fillstyle: [&#x27;full&#x27; | &#x27;left&#x27; | &#x27;right&#x27; | &#x27;bottom&#x27; | &#x27;top&#x27; | &#x27;none&#x27;]         </span><br><span class="line">gid: an id string         </span><br><span class="line">label: string or anything printable with &#x27;%s&#x27; conversion.         </span><br><span class="line">linestyle or ls: [``&#x27;-&#x27;`` | ``&#x27;--&#x27;`` | ``&#x27;-.&#x27;`` | ``&#x27;:&#x27;`` | ``&#x27;None&#x27;`` |                   ``&#x27; &#x27;`` | ``&#x27;&#x27;``]</span><br><span class="line">linewidth or lw: float value in points         </span><br><span class="line">lod: [True | False]         </span><br><span class="line">marker: :mod:`A valid marker style &lt;matplotlib.markers&gt;`</span><br><span class="line">markeredgecolor or mec: any matplotlib color         </span><br><span class="line">markeredgewidth or mew: float value in points         </span><br><span class="line">markerfacecolor or mfc: any matplotlib color         </span><br><span class="line">markerfacecoloralt or mfcalt: any matplotlib color         </span><br><span class="line">markersize or ms: float         </span><br><span class="line">markevery: [None | int | length-2 tuple of int | slice |         list/array of int | float | length-2 tuple of float]</span><br><span class="line">path_effects: unknown</span><br><span class="line">picker: float distance in points or callable pick function         ``fn(artist, event)``         </span><br><span class="line">pickradius: float distance in points         </span><br><span class="line">rasterized: [True | False | None]         </span><br><span class="line">sketch_params: unknown</span><br><span class="line">snap: unknown</span><br><span class="line">solid_capstyle: [&#x27;butt&#x27; | &#x27;round&#x27; |  &#x27;projecting&#x27;]         </span><br><span class="line">solid_joinstyle: [&#x27;miter&#x27; | &#x27;round&#x27; | &#x27;bevel&#x27;]         </span><br><span class="line">transform: a :class:`matplotlib.transforms.Transform` instance         </span><br><span class="line">url: a url string         </span><br><span class="line">visible: [True | False]         </span><br><span class="line">xdata: 1D array         </span><br><span class="line">ydata: 1D array         </span><br><span class="line">zorder: any number</span><br></pre></td></tr></table></figure></li>
<li><p>图形上加上文字:</p>
<ul>
<li><code>xlabel</code> ：x 轴标注</li>
<li><code>ylabel</code> ：y 轴标注</li>
<li><code>title</code> ：图形标题</li>
<li><code>text</code> ：在指定位置放入文字</li>
<li><code>annotate</code>：注释<ol>
<li><code>xy</code>参数 ：注释位置</li>
<li><code>xytext</code>参数 ：注释文字位置</li>
</ol>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mu, sigma = <span class="number">100</span>, <span class="number">15</span></span><br><span class="line">x = mu + sigma * np.random.randn(<span class="number">10000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># the histogram of the data</span></span><br><span class="line">n, bins, patches = plt.hist(x, <span class="number">50</span>, normed=<span class="number">1</span>, facecolor=<span class="string">&#x27;g&#x27;</span>, alpha=<span class="number">0.75</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># x轴标签名</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;Smarts&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Probability&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 图形标题</span></span><br><span class="line">plt.title(<span class="string">&#x27;Histogram of IQ&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在指定位置放入文字</span></span><br><span class="line"><span class="comment"># 如果要输入特殊符号,需要使用Tex语法</span></span><br><span class="line">plt.text(<span class="number">60</span>, <span class="number">.025</span>, <span class="string">r&#x27;$\mu=100,\ \sigma=15$&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.axis([<span class="number">40</span>, <span class="number">160</span>, <span class="number">0</span>, <span class="number">0.03</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 是否显示网格</span></span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/1557541333930.png" alt="1557541333930"></p>
</li>
</ol>
<p>刻度、标签和图例</p>
<p>对于⼤多数的图表装饰项，其主要实现⽅式有⼆：</p>
<ul>
<li>使⽤过程型的pyplot接⼝（例如，matplotlib.pyplot）</li>
<li>更为⾯向对象的原生matplotlib API。</li>
</ul>
<p><strong>pyplot接口的设计⽬的就是交互式使⽤</strong>:</p>
<ul>
<li>xlim⽅法:<br>控制图表的范围</li>
<li>xticks⽅法:<br>控制刻度位置</li>
<li>xticklabels⽅法:<br>控制刻度标签</li>
</ul>
<p>使⽤⽅式:</p>
<ul>
<li>调⽤时不带参数，则返回当前的参数值<br>（例如，plt.xlim()返回当前的X轴绘图范围）。</li>
<li>调⽤时带参数，则设置参数值<br>（例如，plt.xlim([0,10])会将X轴的范围设置为0到10）。</li>
</ul>
<p>所有这些⽅法都是AxesSubplot起作⽤的。<br>它们各⾃对应subplot对象上的两个⽅法，以xlim为例，就是<code>ax.get_xlim</code>和<code>ax.set_xlim</code>。</p>
<p>设置标题、轴标签、刻度以及刻度标签</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">ax.plot(np.random.randn(<span class="number">1000</span>).cumsum())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置轴标签范围</span></span><br><span class="line">ticks = ax.set_xticks([<span class="number">0</span>, <span class="number">250</span>, <span class="number">500</span>, <span class="number">750</span>, <span class="number">1000</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置标签值,倾斜30度小字体</span></span><br><span class="line">labels = ax.set_xticklabels([<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>, <span class="string">&#x27;four&#x27;</span>, <span class="string">&#x27;five&#x27;</span>],</span><br><span class="line">                            rotation=<span class="number">30</span>, fontsize=<span class="string">&#x27;small&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置图形名称</span></span><br><span class="line">ax.set_title(<span class="string">&#x27;My first matplotlib plot&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置轴名称</span></span><br><span class="line">ax.set_xlabel(<span class="string">&#x27;Stages&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/1557543158160.png" alt="1557543158160"></p>
<p>要是嫌上面的代码太繁琐,可以直接使用set函数:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">ax.plot(np.random.randn(<span class="number">1000</span>).cumsum())</span><br><span class="line"></span><br><span class="line">props = &#123;</span><br><span class="line">    <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;My first matplotlib plot&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;xlabel&#x27;</span>: <span class="string">&#x27;Stages&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;xticklabels&#x27;</span>:[<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>, <span class="string">&#x27;four&#x27;</span>, <span class="string">&#x27;five&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;xticks&#x27;</span>:[<span class="number">0</span>, <span class="number">250</span>, <span class="number">500</span>, <span class="number">750</span>, <span class="number">1000</span>],</span><br><span class="line">&#125;</span><br><span class="line">ax.<span class="built_in">set</span>(**props)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>



<p>添加图例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"><span class="keyword">from</span> numpy.random <span class="keyword">import</span> randn</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># fig, axes = plt.subplots(1, 1)</span></span><br><span class="line">ax = plt.subplots(<span class="number">1</span>, <span class="number">1</span>)[-<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在添加subplot的时候传⼊label参数：</span></span><br><span class="line">ax.plot(randn(<span class="number">1000</span>).cumsum(), <span class="string">&#x27;r&#x27;</span>, label=<span class="string">&#x27;one&#x27;</span>)</span><br><span class="line">ax.plot(randn(<span class="number">1000</span>).cumsum(), <span class="string">&#x27;g--&#x27;</span>, label=<span class="string">&#x27;two&#x27;</span>)</span><br><span class="line">ax.plot(randn(<span class="number">1000</span>).cumsum(), <span class="string">&#x27;b.&#x27;</span>, label=<span class="string">&#x27;three&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ax.legend()来⾃动创建图例</span></span><br><span class="line"><span class="comment"># loc告诉matplotlib要将图例放在哪</span></span><br><span class="line">ax.legend(loc=<span class="string">&#x27;best&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/Figure_1.png" alt="Figure_1"></p>
<p>注解以及在Subplot上绘图</p>
<p>注解和⽂字可以通过text、arrow和annotate函数进⾏添加。text可以将⽂本绘制在图表的指定坐标(x,y)，还可以加上⼀些⾃定义格式：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ax.text(x, y, <span class="string">&#x27;Hello world!&#x27;</span>,family=<span class="string">&#x27;monospace&#x27;</span>, fontsize=<span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<p>ax.annotate⽅法:在指定的x和y坐标轴绘制标签。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">data = pd.read_csv(<span class="string">&#x27;examples/spx.csv&#x27;</span>, index_col=<span class="number">0</span>, parse_dates=<span class="literal">True</span>)</span><br><span class="line">spx = data[<span class="string">&#x27;SPX&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">spx.plot(ax=ax, style=<span class="string">&#x27;r-&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">crisis_data = [</span><br><span class="line">    (datetime(<span class="number">2007</span>, <span class="number">10</span>, <span class="number">11</span>), <span class="string">&#x27;Peak of bull market&#x27;</span>),</span><br><span class="line">    (datetime(<span class="number">2008</span>, <span class="number">3</span>, <span class="number">12</span>), <span class="string">&#x27;Bear Stearns Fails&#x27;</span>),</span><br><span class="line">    (datetime(<span class="number">2008</span>, <span class="number">9</span>, <span class="number">15</span>), <span class="string">&#x27;Lehman Bankruptcy&#x27;</span>)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> date, label <span class="keyword">in</span> crisis_data:</span><br><span class="line">    ax.annotate(label, xy=(date, spx.asof(date) + <span class="number">75</span>),</span><br><span class="line">                xytext=(date, spx.asof(date) + <span class="number">225</span>),</span><br><span class="line">                arrowprops=<span class="built_in">dict</span>(facecolor=<span class="string">&#x27;black&#x27;</span>, headwidth=<span class="number">4</span>, width=<span class="number">2</span>,headlength=<span class="number">4</span>),</span><br><span class="line">                horizontalalignment=<span class="string">&#x27;left&#x27;</span>, verticalalignment=<span class="string">&#x27;top&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Zoom in on 2007-2010</span></span><br><span class="line">ax.set_xlim([<span class="string">&#x27;1/1/2007&#x27;</span>, <span class="string">&#x27;1/1/2011&#x27;</span>])</span><br><span class="line">ax.set_ylim([<span class="number">600</span>, <span class="number">1800</span>])</span><br><span class="line"></span><br><span class="line">ax.set_title(<span class="string">&#x27;Important dates in the 2008-2009 financial crisis&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/Figure_2.png" alt="Figure_2"></p>
<p>图形的绘制要麻烦⼀些。<br>matplotlib有⼀些表示常⻅图形的对象。这些对象被称为<strong>块</strong>（patch）。<br>要在图表中添加⼀个图形，你需要<strong>创建⼀个块对象shp</strong>，然后通过ax.add_patch(shp)将其添加到subplot中:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = fig.add_subplot(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建⼀个块对象shp</span></span><br><span class="line"><span class="comment"># 三角形</span></span><br><span class="line">rect = plt.Rectangle((<span class="number">0.2</span>, <span class="number">0.75</span>), <span class="number">0.4</span>, <span class="number">0.15</span>, color=<span class="string">&#x27;k&#x27;</span>, alpha=<span class="number">0.3</span>)</span><br><span class="line"><span class="comment"># 圆形</span></span><br><span class="line">circ = plt.Circle((<span class="number">0.7</span>, <span class="number">0.2</span>), <span class="number">0.15</span>, color=<span class="string">&#x27;b&#x27;</span>, alpha=<span class="number">0.3</span>)</span><br><span class="line"><span class="comment"># 多边形</span></span><br><span class="line">pgon = plt.Polygon([[<span class="number">0.15</span>, <span class="number">0.15</span>], [<span class="number">0.35</span>, <span class="number">0.4</span>], [<span class="number">0.2</span>, <span class="number">0.6</span>]],color=<span class="string">&#x27;g&#x27;</span>, alpha=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ax.add_patch(shp)将shp对象添加到subplot中:</span></span><br><span class="line">ax.add_patch(rect)</span><br><span class="line">ax.add_patch(circ)</span><br><span class="line">ax.add_patch(pgon)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/Figure_3.png" alt="Figure_3"></p>
<p>将图表保存到⽂件</p>
<ul>
<li><p>plt.savefig:将当前图表保存到⽂件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dpi:“每英⼨点数”分辨率</span></span><br><span class="line"><span class="comment"># bbox_inches:剪除当前图表周围的空⽩部分</span></span><br><span class="line">plt.savefig(<span class="string">&#x27;figpath.png&#x27;</span>, dpi=<span class="number">400</span>, bbox_inches=<span class="string">&#x27;tight&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>Figure对象的实例⽅法savefig</p>
</li>
</ul>
<p>savefig并⾮⼀定要写⼊磁盘，也可以写⼊任何⽂件型的对象，⽐如BytesIO：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">![<span class="number">36985537</span>](F:/乱七八糟/<span class="number">360</span>安全浏览器下载/chrome/下载/<span class="number">36985537.</span>pngfrom io <span class="keyword">import</span> BytesIO</span><br><span class="line"></span><br><span class="line">buffer = BytesIO()</span><br><span class="line">plt.savefig(buffer)</span><br><span class="line">plot_data = buffer.getvalue()</span><br></pre></td></tr></table></figure>

<p>Figure.savefig选项</p>
<p><img src="/images/36985537.png" alt="36985537"></p>
<p>matplotlib配置</p>
<p>rc⽅法</p>
<ul>
<li>第⼀个参数是希望⾃定义的对象，’figure’、’axes’、’xtick’、’ytick’、’grid’、’legend’等。</li>
<li>后面都是关键字参数.<br>所以可以使用字典传入</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将全局的图像默认⼤⼩设置为10×10，你可以执⾏</span></span><br><span class="line">plt.rc(<span class="string">&#x27;figure&#x27;</span>, figsize=(<span class="number">10</span>, <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用字典传入</span></span><br><span class="line">font_options = &#123;<span class="string">&#x27;family&#x27;</span> : <span class="string">&#x27;monospace&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;weight&#x27;</span> : <span class="string">&#x27;bold&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;size&#x27;</span>   : <span class="string">&#x27;small&#x27;</span>&#125;</span><br><span class="line">plt.rc(<span class="string">&#x27;font&#x27;</span>, **font_options)</span><br></pre></td></tr></table></figure>



<hr>
<h2 id="9-2-使⽤pandas和seaborn绘图"><a href="#9-2-使⽤pandas和seaborn绘图" class="headerlink" title="9.2 使⽤pandas和seaborn绘图"></a>9.2 使⽤pandas和seaborn绘图</h2><p>图表的基本组件:</p>
<ul>
<li>数据展示:<br>图表类型：线型图、柱状图、盒形图、散布图、等值线图等</li>
<li>图例</li>
<li>标题</li>
<li>刻度标</li>
<li>注解型信息。</li>
</ul>
<p>线型图:<br>默认创建的图形就是线性图</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s = pd.Series(np.random.randn(<span class="number">10</span>).cumsum(), index=np.arange(<span class="number">0</span>, <span class="number">100</span>, <span class="number">10</span>))</span><br><span class="line"><span class="built_in">print</span>(s)</span><br><span class="line"><span class="comment"># 0    -0.166507</span></span><br><span class="line"><span class="comment"># 10   -1.134936</span></span><br><span class="line"><span class="comment"># 20   -0.253578</span></span><br><span class="line"><span class="comment"># 30   -1.814358</span></span><br><span class="line"><span class="comment"># 40   -3.598128</span></span><br><span class="line"><span class="comment"># 50   -3.102310</span></span><br><span class="line"><span class="comment"># 60   -3.294786</span></span><br><span class="line"><span class="comment"># 70   -3.554902</span></span><br><span class="line"><span class="comment"># 80   -3.329025</span></span><br><span class="line"><span class="comment"># 90   -4.211883</span></span><br><span class="line"><span class="comment"># dtype: float64</span></span><br><span class="line"></span><br><span class="line">s.plot()</span><br></pre></td></tr></table></figure>

<p><img src="/images/1557547900645.png" alt="1557547900645"></p>
<ul>
<li>==该Series对象的索引会被传给matplotlib，并⽤以绘制X轴。==可以通过use_index=False禁⽤该功能。</li>
<li>X轴的刻度和界限通过xticks和xlim选项进⾏调节,Y轴就⽤yticks和ylim。</li>
</ul>
<p>plot参数的完整列表:</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>label</td>
<td>图例标签</td>
</tr>
<tr>
<td>ax</td>
<td>要在其上进行绘制的 matplotlib subplot对象。如果没有设置，则使用当前matplotlib subplot</td>
</tr>
<tr>
<td>style</td>
<td>将要传给 matplotlib的风格字符串（如’ko–’)</td>
</tr>
<tr>
<td>alpha</td>
<td>图表的填充不透明度（0到1之间）</td>
</tr>
<tr>
<td>kind</td>
<td>可以是’line’、’bar‘、’barh、’kde’</td>
</tr>
<tr>
<td>logy</td>
<td>在Y轴上使用对数标尺</td>
</tr>
<tr>
<td>use_index</td>
<td>将对象的索引用作刻度标签</td>
</tr>
<tr>
<td>rot</td>
<td>旋转刻度标签（0到360）</td>
</tr>
<tr>
<td>xticks</td>
<td>用作X轴刻度的值</td>
</tr>
<tr>
<td>yticks</td>
<td>用作Y轴刻度的值</td>
</tr>
<tr>
<td>xlim</td>
<td>X轴的界限（例如[0，10]）</td>
</tr>
<tr>
<td>ylim</td>
<td>Y轴的界限</td>
</tr>
<tr>
<td>grid</td>
<td>显示轴网格线（默认打开）</td>
</tr>
</tbody></table>
<p>注意:<br>plot的关键字参数会被传给相应的matplotlib绘图函数，所以要更深⼊地⾃定义图表，就必须学习有关matplotlib API。</p>
<p>DataFrame的plot⽅法会在⼀个subplot中为<strong>各列</strong>绘制⼀条线，并⾃动创建图例<br>也就是说,==一个series就绘制一条线==</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">888</span>)</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(np.random.randn(<span class="number">10</span>, <span class="number">4</span>).cumsum(<span class="number">0</span>),</span><br><span class="line">                  columns=[<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>],</span><br><span class="line">                  index=np.arange(<span class="number">0</span>, <span class="number">100</span>, <span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">df.plot()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/Figure_4.png" alt="Figure_4"></p>
<p>专⽤于DataFrame的plot参数</p>
<p><img src="/images/7777777537.png" alt="7777777537"></p>
<p>柱状图</p>
<p><strong>plot.bar()和plot.barh()分别绘制⽔平和垂直的柱状图</strong>.<br>这时，Series和DataFrame的索引将会被⽤作X（bar）或Y（barh）刻度</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">888</span>)</span><br><span class="line"></span><br><span class="line">fig, axes = plt.subplots(<span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">data = pd.Series(np.random.rand(<span class="number">16</span>), index=<span class="built_in">list</span>(<span class="string">&#x27;abcdefghijklmnop&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将行索引作为刻度</span></span><br><span class="line">data.plot.bar(ax=axes[<span class="number">0</span>], color=<span class="string">&#x27;k&#x27;</span>, alpha=<span class="number">0.7</span>)</span><br><span class="line">data.plot.barh(ax=axes[<span class="number">1</span>], color=<span class="string">&#x27;k&#x27;</span>, alpha=<span class="number">0.7</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/Figure_5.png" alt="Figure_5"></p>
<p>对于DataFrame，</p>
<ul>
<li><strong>柱状图会将每⼀列的值分为⼀组，并排显示</strong></li>
<li>DataFrame各列的名称”Genus”被⽤作了图例的标题</li>
<li>设置stacked=True即可为DataFrame⽣成堆积柱状图</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">12348</span>)</span><br><span class="line">fig, axes = plt.subplots(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(np.random.rand(<span class="number">6</span>, <span class="number">4</span>),</span><br><span class="line">                  index=[<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>, <span class="string">&#x27;four&#x27;</span>, <span class="string">&#x27;five&#x27;</span>, <span class="string">&#x27;six&#x27;</span>],</span><br><span class="line">                  columns=pd.Index([<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>], name=<span class="string">&#x27;Genus&#x27;</span>))</span><br><span class="line"></span><br><span class="line">df.plot.bar()</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/Figure_6.png" alt="Figure_6"></p>
<p>柱状图有⼀个⾮常不错的⽤法：利⽤value_counts图形化显示Series中各值的出现频率:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">![Figure_8](C:/Users/lenovo/Figure_8.pngimport numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">1238</span>)</span><br><span class="line">se = pd.Series(np.random.randint(<span class="number">1</span>,<span class="number">5</span>,<span class="number">10</span>), name=<span class="string">&#x27;Genus&#x27;</span>)</span><br><span class="line"></span><br><span class="line">se.value_counts().plot.bar(title=<span class="string">&#x27;frequency&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/Figure_8.png" alt="Figure_8"></p>
<p>将柱状图堆积:<br><code>df.plot.barh(stacked=True, alpha=0.5)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">12348</span>)</span><br><span class="line"></span><br><span class="line">fig, axes = plt.subplots(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(np.random.rand(<span class="number">6</span>, <span class="number">4</span>),</span><br><span class="line">                  index=[<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>, <span class="string">&#x27;four&#x27;</span>, <span class="string">&#x27;five&#x27;</span>, <span class="string">&#x27;six&#x27;</span>],</span><br><span class="line">                  columns=pd.Index([<span class="string">&#x27;A&#x27;</span>, <span class="string">&#x27;B&#x27;</span>, <span class="string">&#x27;C&#x27;</span>, <span class="string">&#x27;D&#x27;</span>], name=<span class="string">&#x27;Genus&#x27;</span>))</span><br><span class="line"></span><br><span class="line">df.plot.barh(stacked=<span class="literal">True</span>, alpha=<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/Figure_7.png" alt="Figure_7"></p>
<p>做⼀张堆积柱状图以展示每天各种聚会规模的数据点的百分⽐。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">tips = pd.read_csv(<span class="string">&#x27;examples/tips.csv&#x27;</span>)</span><br><span class="line">party_counts = pd.crosstab(tips[<span class="string">&#x27;day&#x27;</span>], tips[<span class="string">&#x27;size&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(party_counts)</span><br><span class="line"><span class="comment"># size  1   2   3   4  5  6</span></span><br><span class="line"><span class="comment"># day                      </span></span><br><span class="line"><span class="comment"># Fri   1  16   1   1  0  0</span></span><br><span class="line"><span class="comment"># Sat   2  53  18  13  1  0</span></span><br><span class="line"><span class="comment"># Sun   0  39  15  18  3  1</span></span><br><span class="line"><span class="comment"># Thur  1  48   4   5  1  3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取2行到5行</span></span><br><span class="line">party_counts = party_counts.loc[:, <span class="number">2</span>:<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 除以总人数得到比例</span></span><br><span class="line">party_pcts = party_counts.div(party_counts.<span class="built_in">sum</span>(<span class="number">1</span>), axis=<span class="number">0</span>)</span><br><span class="line"><span class="built_in">print</span>(party_pcts)</span><br><span class="line"><span class="comment"># size         2         3         4         5</span></span><br><span class="line"><span class="comment"># day                                         </span></span><br><span class="line"><span class="comment"># Fri   0.888889  0.055556  0.055556  0.000000</span></span><br><span class="line"><span class="comment"># Sat   0.623529  0.211765  0.152941  0.011765</span></span><br><span class="line"><span class="comment"># Sun   0.520000  0.200000  0.240000  0.040000</span></span><br><span class="line"><span class="comment"># Thur  0.827586  0.068966  0.086207  0.017241</span></span><br><span class="line"></span><br><span class="line">party_pcts.plot.bar()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/Figure_9.png" alt="Figure_9"></p>
<p>直⽅图和密度图</p>
<p>直⽅图:histogram.所以函数为hist</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(&#123;</span><br><span class="line">	<span class="string">&#x27;length&#x27;</span>: [<span class="number">1.5</span>, <span class="number">0.5</span>, <span class="number">1.2</span>, <span class="number">0.9</span>, <span class="number">3</span>],</span><br><span class="line">	<span class="string">&#x27;width&#x27;</span>: [<span class="number">0.7</span>, <span class="number">0.2</span>, <span class="number">0.15</span>, <span class="number">0.2</span>, <span class="number">1.1</span>]&#125;, </span><br><span class="line">	index= [<span class="string">&#x27;pig&#x27;</span>, <span class="string">&#x27;rabbit&#x27;</span>, <span class="string">&#x27;duck&#x27;</span>, <span class="string">&#x27;chicken&#x27;</span>, <span class="string">&#x27;horse&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示在3个bins中</span></span><br><span class="line">hist = df.hist(bins=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/Figure_10.png" alt="Figure_10"></p>
<p>密度图也被称作KDE（Kernel Density Estimate，核密度估计）图。<br>所以密度图的函数就是density()</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(&#123;</span><br><span class="line">	<span class="string">&#x27;length&#x27;</span>: [<span class="number">1.5</span>, <span class="number">0.5</span>, <span class="number">1.2</span>, <span class="number">0.9</span>, <span class="number">3</span>],</span><br><span class="line">	<span class="string">&#x27;width&#x27;</span>: [<span class="number">0.7</span>, <span class="number">0.2</span>, <span class="number">0.15</span>, <span class="number">0.2</span>, <span class="number">1.1</span>]&#125;, </span><br><span class="line">	index= [<span class="string">&#x27;pig&#x27;</span>, <span class="string">&#x27;rabbit&#x27;</span>, <span class="string">&#x27;duck&#x27;</span>, <span class="string">&#x27;chicken&#x27;</span>, <span class="string">&#x27;horse&#x27;</span>])</span><br><span class="line"></span><br><span class="line">hist = df.plot.density()</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/Figure_11.png" alt="Figure_11"></p>
<p>seaborn的distplot⽅法绘制直⽅图和密度图更加简单，还可以同时画出直⽅图和连续密度估计图。</p>
<p>实现⼀个双峰分布，由两个不同的标准正态分布组成:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">12348</span>)</span><br><span class="line"></span><br><span class="line">comp1 = np.random.normal(<span class="number">0</span>, <span class="number">1</span>, size=<span class="number">200</span>)</span><br><span class="line">comp2 = np.random.normal(<span class="number">10</span>, <span class="number">2</span>, size=<span class="number">200</span>)</span><br><span class="line">values = pd.Series(np.concatenate([comp1, comp2]))</span><br><span class="line"><span class="built_in">print</span>(values)</span><br><span class="line"></span><br><span class="line">sns.distplot(values, bins=<span class="number">100</span>, color=<span class="string">&#x27;k&#x27;</span>)</span><br><span class="line"><span class="comment"># 0       1.309562</span></span><br><span class="line"><span class="comment"># 1      -1.647653</span></span><br><span class="line"><span class="comment"># 2      -0.076477</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="comment"># 397    12.130122</span></span><br><span class="line"><span class="comment"># 398    10.297347</span></span><br><span class="line"><span class="comment"># 399     8.813654</span></span><br><span class="line"><span class="comment"># Length: 400, dtype: float64</span></span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/Figure_12.png" alt="Figure_12"></p>
<p>散布图或点图<br>使⽤seaborn的regplot⽅法，它可以做⼀个散布图</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line">macro = pd.read_csv(<span class="string">&#x27;examples/macrodata.csv&#x27;</span>)</span><br><span class="line">data = macro[[<span class="string">&#x27;cpi&#x27;</span>, <span class="string">&#x27;m1&#x27;</span>, <span class="string">&#x27;tbilrate&#x27;</span>, <span class="string">&#x27;unemp&#x27;</span>]]</span><br><span class="line">trans_data = np.log(data).diff().dropna()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(trans_data[-<span class="number">5</span>:])</span><br><span class="line"><span class="comment">#           cpi        m1  tbilrate     unemp</span></span><br><span class="line"><span class="comment"># 198 -0.007904  0.045361 -0.396881  0.105361</span></span><br><span class="line"><span class="comment"># 199 -0.021979  0.066753 -2.277267  0.139762</span></span><br><span class="line"><span class="comment"># 200  0.002340  0.010286  0.606136  0.160343</span></span><br><span class="line"><span class="comment"># 201  0.008419  0.037461 -0.200671  0.127339</span></span><br><span class="line"><span class="comment"># 202  0.008894  0.012202 -0.405465  0.042560</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sns.regplot(<span class="string">&#x27;m1&#x27;</span>, <span class="string">&#x27;unemp&#x27;</span>, data=trans_data)</span><br><span class="line">plt.title(<span class="string">&#x27;Changes in log %s versus log %s&#x27;</span> % (<span class="string">&#x27;m1&#x27;</span>, <span class="string">&#x27;unemp&#x27;</span>))</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/Figure_13.png" alt="Figure_13"></p>
<p>在探索式数据分析⼯作中，同时观察⼀组变量的散布图是很有意义的，这也被称为<strong>散布图矩阵</strong>（scatter plot matrix）。<br>这是要使用seaborn库的pairplot:<br>它⽀持在对⻆线上放置每个变量的直⽅图或密度估计</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line">macro = pd.read_csv(<span class="string">&#x27;examples/macrodata.csv&#x27;</span>)</span><br><span class="line">data = macro[[<span class="string">&#x27;cpi&#x27;</span>, <span class="string">&#x27;m1&#x27;</span>, <span class="string">&#x27;tbilrate&#x27;</span>, <span class="string">&#x27;unemp&#x27;</span>]]</span><br><span class="line">trans_data = np.log(data).diff().dropna()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(trans_data[-<span class="number">5</span>:])</span><br><span class="line"><span class="comment">#           cpi        m1  tbilrate     unemp</span></span><br><span class="line"><span class="comment"># 198 -0.007904  0.045361 -0.396881  0.105361</span></span><br><span class="line"><span class="comment"># 199 -0.021979  0.066753 -2.277267  0.139762</span></span><br><span class="line"><span class="comment"># 200  0.002340  0.010286  0.606136  0.160343</span></span><br><span class="line"><span class="comment"># 201  0.008419  0.037461 -0.200671  0.127339</span></span><br><span class="line"><span class="comment"># 202  0.008894  0.012202 -0.405465  0.042560</span></span><br><span class="line"></span><br><span class="line">sns.pairplot(trans_data, diag_kind=<span class="string">&#x27;kde&#x27;</span>, plot_kws=&#123;<span class="string">&#x27;alpha&#x27;</span>: <span class="number">0.2</span>&#125;)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/images/Figure_14.png" alt="Figure_14"></p>
<p>分⾯⽹格（facet grid）和类型数据</p>
<p>有多个分类变量的数据可视化的⼀种⽅法是使⽤⼩⾯⽹格。seaborn有⼀个有⽤的内置函数factorplot，可以简化制作多种分⾯图</p>
<p>看不懂,略</p>
</div></div></article><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>