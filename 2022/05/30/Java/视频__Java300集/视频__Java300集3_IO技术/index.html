<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=" id=&quot;Java-io包&quot;&gt;&lt;a href=&quot;#Java-io包&quot; class=&quot;headerlink&quot; title=&quot;Java.io包&quot;&gt;&lt;/a&gt;Java.io包&lt;/h2&gt;&lt;p&gt;在整个Java.io包中最重要的就是&lt;code&gt;5个类&lt;/code&gt;和&lt;code&gt;3个接口&lt;/code&gt;"><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><title>Java300集3_IO技术 | 凉薄的自动书记人偶</title><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Hexo 5.4.0"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Tags</a><a class="sidebar-nav-item" href="/About">About</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Java/" rel="tag">Java</a></div><div class="post-time">2022-05-30</div></div></div><div class="container post-header"><h1>Java300集3_IO技术</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Java-io%E5%8C%85"><span class="toc-number">1.</span> <span class="toc-text">Java.io包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%81%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">2.</span> <span class="toc-text">流的分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%89%E6%B5%81%E7%9A%84%E6%96%B9%E5%90%91%E5%88%86%E7%B1%BB"><span class="toc-number">2.1.</span> <span class="toc-text">按流的方向分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%89%E5%A4%84%E7%90%86%E7%9A%84%E6%95%B0%E6%8D%AE%E5%8D%95%E5%85%83%E5%88%86%E7%B1%BB"><span class="toc-number">2.2.</span> <span class="toc-text">按处理的数据单元分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%89%E5%A4%84%E7%90%86%E5%AF%B9%E8%B1%A1%E4%B8%8D%E5%90%8C%E5%88%86%E7%B1%BB"><span class="toc-number">2.3.</span> <span class="toc-text">按处理对象不同分类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%B5%81"><span class="toc-number">3.</span> <span class="toc-text">常用流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#File%E7%B1%BB"><span class="toc-number">4.</span> <span class="toc-text">File类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95"><span class="toc-number">4.1.</span> <span class="toc-text">构造方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">4.2.</span> <span class="toc-text">文件常用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">4.3.</span> <span class="toc-text">目录常用方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E7%A0%81%E4%B8%8E%E8%A7%A3%E7%A0%81"><span class="toc-number">5.</span> <span class="toc-text">编码与解码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E5%A4%A7IO%E6%8A%BD%E8%B1%A1%E7%B1%BB"><span class="toc-number">6.</span> <span class="toc-text">四大IO抽象类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B7%E4%BD%93IO%E6%B5%81"><span class="toc-number">7.</span> <span class="toc-text">具体IO流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%AD%97%E8%8A%82%E8%BE%93%E5%85%A5%E6%B5%81FileInputStream%E5%92%8C%E6%96%87%E4%BB%B6%E5%AD%97%E8%8A%82%E8%BE%93%E5%87%BA%E6%B5%81FileOutputStream"><span class="toc-number">7.1.</span> <span class="toc-text">文件字节输入流FileInputStream和文件字节输出流FileOutputStream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%AD%97%E7%AC%A6%E8%BE%93%E5%85%A5%E6%B5%81FileReader%E4%B8%8E%E6%96%87%E4%BB%B6%E5%AD%97%E7%AC%A6%E8%BE%93%E5%87%BA%E6%B5%81FileWriter"><span class="toc-number">7.2.</span> <span class="toc-text">文件字符输入流FileReader与文件字符输出流FileWriter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E6%95%B0%E7%BB%84%E6%B5%81ByteArrayInputStream%E5%92%8CByteArrayOutputStream"><span class="toc-number">7.3.</span> <span class="toc-text">字节数组流ByteArrayInputStream和ByteArrayOutputStream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%93%E5%86%B2%E5%AD%97%E8%8A%82%E6%B5%81BufferedInputStream%E5%92%8CBufferedOutputStream"><span class="toc-number">7.4.</span> <span class="toc-text">缓冲字节流BufferedInputStream和BufferedOutputStream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%93%E5%86%B2%E5%AD%97%E7%AC%A6%E6%B5%81BufferedReader%E5%92%8CBufferedWriter"><span class="toc-number">7.5.</span> <span class="toc-text">缓冲字符流BufferedReader和BufferedWriter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E6%8D%A2%E6%B5%81InputStreamReader%E5%92%8COutputStreamWriter"><span class="toc-number">7.6.</span> <span class="toc-text">转换流InputStreamReader和OutputStreamWriter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%B5%81DataInputStream%E5%92%8CDataOutputStream"><span class="toc-number">7.7.</span> <span class="toc-text">数据流DataInputStream和DataOutputStream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%B5%81ObjectInputStream-ObjectOutputStream"><span class="toc-number">7.8.</span> <span class="toc-text">对象流ObjectInputStream&#x2F;ObjectOutputStream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%8D%B0%E6%B5%81PrintSream%E5%92%8CPrintWriter"><span class="toc-number">7.9.</span> <span class="toc-text">打印流PrintSream和PrintWriter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%8F%E6%9C%BA%E6%B5%81RandomAccessFile"><span class="toc-number">7.10.</span> <span class="toc-text">随机流RandomAccessFile</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="toc-number">8.</span> <span class="toc-text">装饰器</span></a></li></ol></details></div><div class="container post-content"><h2 id="Java-io包"><a href="#Java-io包" class="headerlink" title="Java.io包"></a>Java.io包</h2><p>在整个Java.io包中最重要的就是<code>5个类</code>和<code>3个接口</code></p>
<table>
<thead>
<tr>
<th>类</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>File</td>
<td>文件类</td>
</tr>
<tr>
<td>InputStream</td>
<td>字节输入流</td>
</tr>
<tr>
<td>OutputStream</td>
<td>字节输出流</td>
</tr>
<tr>
<td>Reader</td>
<td>字符输入流</td>
</tr>
<tr>
<td>Writer</td>
<td>字符输出流</td>
</tr>
<tr>
<td>Closeable</td>
<td>关闭流接口</td>
</tr>
<tr>
<td>Flushable</td>
<td>刷新流接口</td>
</tr>
<tr>
<td>Serializable</td>
<td>序列化接口</td>
</tr>
</tbody></table>
<h2 id="流的分类"><a href="#流的分类" class="headerlink" title="流的分类"></a>流的分类</h2><h3 id="按流的方向分类"><a href="#按流的方向分类" class="headerlink" title="按流的方向分类"></a>按流的方向分类</h3><p>输入/输出流的划分是相对程序而言的，</p>
<ul>
<li>从外面进来程序的，称为输入流</li>
<li>从程序出去外面的，称为输出流</li>
</ul>
<h3 id="按处理的数据单元分类"><a href="#按处理的数据单元分类" class="headerlink" title="按处理的数据单元分类"></a>按处理的数据单元分类</h3><ul>
<li>字节流：以字节为单位获取数据，命名上<strong>以Stream结尾的流一般是字节流</strong>，如FileInputStream、FileOutputStream。</li>
<li>字符流：以字符为单位获取数据，命名上<strong>以Reader/Writer结尾的流一般是字符流</strong>，如FileReader、FileWriter。</li>
</ul>
<h3 id="按处理对象不同分类"><a href="#按处理对象不同分类" class="headerlink" title="按处理对象不同分类"></a>按处理对象不同分类</h3><ul>
<li> 节点流：可以直接从数据源或目的地读写数据，如FileInputStream、FileReader、DataInputStream等。</li>
<li>处理流：不直接连接到数据源或目的地，是<code>处理流的流</code>。通过对其他流的处理提高程序的性能，如BufferedInputStream、BufferedReader等。处理流也叫包装流。</li>
</ul>
<p><img src="/images/1495702229684292.png" alt=".png"></p>
<h2 id="常用流"><a href="#常用流" class="headerlink" title="常用流"></a>常用流</h2><ol>
<li><code>InputStream/OutputStream</code>：字节流的抽象类。</li>
<li><code>Reader/Writer</code>：字符流的抽象类。</li>
<li><code>FileInputStream/FileOutputStream</code>：节点流：以字节为单位直接操作“文件”</li>
<li><code>ByteArrayInputStream/ByteArrayOutputStream</code>：节点流：以字节为单位直接操作“字节数组对象”。</li>
<li><code>ObjectInputStream/ObjectOutputStream</code>：处理流：以字节为单位直接操作“对象”。</li>
<li><code>DataInputStream/DataOutputStream</code>：处理流：以字节为单位直接操作“基本数据类型与字符串类型”。</li>
<li><code>FileReader/FileWriter</code>：节点流：以字符为单位直接操作“文本文件”(注意：只能读写文本文件)。</li>
<li><code>BufferedReader/BufferedWriter</code>：处理流：将Reader/Writer对象进行包装，增加缓存功能，提高读写效率。</li>
<li><code>BufferedInputStream/BufferedOutputStream</code>：处理流：将InputStream/OutputStream对象进行包装，增加缓存功能，提高 读写效率。</li>
<li><code>InputStreamReader/OutputStreamWriter</code>：处理流：将字节流对象转化成字符流对象。</li>
<li><code>PrintStream</code>：处理流：将OutputStream进行包装，可以方便地输出字符，更加灵活。</li>
</ol>
<h2 id="File类"><a href="#File类" class="headerlink" title="File类"></a>File类</h2><p>Java是不能直接与文件交互的，Java能做的就是<strong>指导操作系统其打开，处理文件</strong>。</p>
<p>所以<strong>File对象可能是文件，可能是目录，还可能根本不存在</strong>。</p>
<h3 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">student4</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String path = <span class="string">&quot;F:/Java/feng.jpg&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 1.构建File对象</span></span><br><span class="line">        File src = <span class="keyword">new</span> File(path);</span><br><span class="line">        System.out.println(src.length());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.组合构建File对象</span></span><br><span class="line">        src = <span class="keyword">new</span> File(<span class="string">&quot;F:/Java&quot;</span>,<span class="string">&quot;feng.jpg&quot;</span>);</span><br><span class="line">        src = <span class="keyword">new</span> File(<span class="string">&quot;F:&quot;</span>,<span class="string">&quot;Java/feng.jpg&quot;</span>);</span><br><span class="line">        System.out.println(src.length());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.使用File对象创建File对象</span></span><br><span class="line">        src = <span class="keyword">new</span> File(<span class="keyword">new</span> File(<span class="string">&quot;F:/Java&quot;</span>),<span class="string">&quot;feng.jpg&quot;</span>);</span><br><span class="line">        System.out.println(src.length()); </span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.创建不存在的文件</span></span><br><span class="line">        src = <span class="keyword">new</span> File(<span class="string">&quot;F:/不存在的目录/不存在的文件.txt&quot;</span>);</span><br><span class="line">        System.out.println(src.getAbsolutePath()); <span class="comment">// F:\不存在的目录\不存在的文件.txt</span></span><br><span class="line"></span><br><span class="line">        System.out.println(System.getProperty(<span class="string">&quot;user.dir&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="文件常用方法"><a href="#文件常用方法" class="headerlink" title="文件常用方法"></a>文件常用方法</h3><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>getName()   getPath()   getAbsolutePath()   getParent()</td>
<td>文件名，路径名</td>
</tr>
<tr>
<td>exists()   isFile()   isDirectory()</td>
<td>判断状态</td>
</tr>
<tr>
<td>length()</td>
<td>文件长度</td>
</tr>
<tr>
<td>createNewFile()   delete()</td>
<td>创建新文件 删除文件</td>
</tr>
</tbody></table>
<p>相对路径是相对谁的路径？相对的是<code>当前目录</code>，也就是<code>user.dir</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(System.getProperty(<span class="string">&quot;user.dir&quot;</span>));</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">student4</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String path = <span class="string">&quot;F:/Java/feng.jpg&quot;</span>;</span><br><span class="line">        File src = <span class="keyword">new</span> File(path);</span><br><span class="line"></span><br><span class="line">        System.out.println(src.getName());  <span class="comment">// feng.jpg</span></span><br><span class="line">        System.out.println(src.getParent());  <span class="comment">// F:\Java</span></span><br><span class="line">        System.out.println(src.getPath());  <span class="comment">// F:\Java\feng.jpg</span></span><br><span class="line">        System.out.println(src.getAbsolutePath());  <span class="comment">// F:\Java\feng.jpg</span></span><br><span class="line"></span><br><span class="line">        System.out.println(src.exists());  <span class="comment">// true</span></span><br><span class="line">        System.out.println(src.isFile());  <span class="comment">// true</span></span><br><span class="line">        System.out.println(src.isDirectory());  <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">        System.out.println(src.length());  <span class="comment">// 72213</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">student4</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        String path = <span class="string">&quot;F:/Java/feng.txt&quot;</span>;</span><br><span class="line">        File src = <span class="keyword">new</span> File(path);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">boolean</span> is_succeed = src.createNewFile();</span><br><span class="line">        System.out.println(is_succeed);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="目录常用方法"><a href="#目录常用方法" class="headerlink" title="目录常用方法"></a>目录常用方法</h3><table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>mkdir()   mkdirs()</td>
<td>创建目录，如果父目录不存在则取消创建<br />创建目录，如果父目录不存在一同创建</td>
</tr>
<tr>
<td>list()</td>
<td>下级名称</td>
</tr>
<tr>
<td>listFiles()</td>
<td>下级File对象</td>
</tr>
<tr>
<td>listRoots()</td>
<td>根路径</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">student4</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        String path = <span class="string">&quot;F:/java&quot;</span>;</span><br><span class="line">        File src = <span class="keyword">new</span> File(path);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*创建目录*/</span></span><br><span class="line">        <span class="keyword">boolean</span> flag = src.mkdir();</span><br><span class="line">        System.out.println(flag);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*以String形式展示目录下的文件和子目录*/</span></span><br><span class="line">        String[] subName = src.list();</span><br><span class="line">        <span class="keyword">for</span>(String each : subName)&#123;</span><br><span class="line">            System.out.println(each);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*以File形式展示目录下的文件和子目录*/</span></span><br><span class="line">        File[] subName2 = src.listFiles();</span><br><span class="line">        <span class="keyword">for</span>(File each : subName2)&#123;</span><br><span class="line">            System.out.println(each);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*展示所有的盘符*/</span></span><br><span class="line">        File[] roots = src.listRoots();</span><br><span class="line">        <span class="keyword">for</span>(File each : roots)&#123;</span><br><span class="line">        	System.out.println(each.getAbsoluteFile());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>递归使用:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">student4</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String path = <span class="string">&quot;F:/乱七八糟/360安全浏览器下载/chrome/下载/messing/小说&quot;</span>;</span><br><span class="line">        File src = <span class="keyword">new</span> File(path);</span><br><span class="line">        ListAllFile(src,<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ListAllFile</span><span class="params">(File f ,<span class="keyword">int</span> level)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(File sub : f.listFiles())&#123;</span><br><span class="line">            <span class="keyword">if</span> (sub.isDirectory())&#123;</span><br><span class="line">                ListAllFile(sub,level+<span class="number">1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span> ; i &lt; level ; i++)&#123;</span><br><span class="line">                    System.out.print(<span class="string">&quot;-&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(sub.getAbsoluteFile());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="编码与解码"><a href="#编码与解码" class="headerlink" title="编码与解码"></a>编码与解码</h2><ul>
<li>编码 : getBytes(String CharsetName) : 返回字节<code>数组</code></li>
<li>解码 : String(byte[] bytes , int offset , int length , String CharsetName)</li>
</ul>
<blockquote>
<p>getBytes() : 默认使用工程的字符集。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">student4</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> UnsupportedEncodingException </span>&#123;</span><br><span class="line">        String msg = <span class="string">&quot;AAA&quot;</span>;</span><br><span class="line">        <span class="keyword">byte</span>[] datas = msg.getBytes();</span><br><span class="line">        System.out.println(datas.length);</span><br><span class="line"></span><br><span class="line">        String w = <span class="keyword">new</span> String(datas,<span class="number">0</span>,datas.length,<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        System.out.println(w);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>出现乱码的原因:</p>
<ul>
<li>字节数不够</li>
<li>字符集不统一</li>
</ul>
<h2 id="四大IO抽象类"><a href="#四大IO抽象类" class="headerlink" title="四大IO抽象类"></a>四大IO抽象类</h2><p><code>InputStream</code>/<code>OutputStream</code>和<code>Reader</code>/<code>writer</code>类是所有IO流类的抽象父类</p>
<table>
<thead>
<tr>
<th>抽象类</th>
<th>说明</th>
<th>常用方法</th>
</tr>
</thead>
<tbody><tr>
<td>InputStream</td>
<td>字节输入流的父类，数据单位为字节。</td>
<td>int read()   void close()</td>
</tr>
<tr>
<td>OutputStream</td>
<td>字节输出流的父类，数据单位为字节。</td>
<td>void write(int)   void flush()   void close()</td>
</tr>
<tr>
<td>Reader</td>
<td>字符输入流的父类，数据单位为字符。</td>
<td>int read()   void close()</td>
</tr>
<tr>
<td>Writer</td>
<td>字符输出流的父类，数据单位为字符。</td>
<td>void write(String)   void flush()   void close()</td>
</tr>
</tbody></table>
<h2 id="具体IO流"><a href="#具体IO流" class="headerlink" title="具体IO流"></a>具体IO流</h2><h3 id="文件字节输入流FileInputStream和文件字节输出流FileOutputStream"><a href="#文件字节输入流FileInputStream和文件字节输出流FileOutputStream" class="headerlink" title="文件字节输入流FileInputStream和文件字节输出流FileOutputStream"></a>文件字节输入流FileInputStream和文件字节输出流FileOutputStream</h3><p><strong>FileInputStream</strong></p>
<ul>
<li>FileInputStream通过字节的方式读取文件，适合读取所有类型的文件(图像、视频、文本文件等)。Java也提供了FileReader专门读取文本文件。</li>
<li>  FileOutputStream 通过字节的方式写数据到文件中，适合所有类型的文件。Java也提供了FileWriter专门写入文本文件。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestIO1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//创建输入流</span></span><br><span class="line">            FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">&quot;d:/a.txt&quot;</span>); <span class="comment">// 文件内容是：abc</span></span><br><span class="line">            <span class="comment">//一个字节一个字节的读取数据</span></span><br><span class="line">            <span class="keyword">int</span> s1 = fis.read(); <span class="comment">// 打印输入字符a对应的ascii码值97</span></span><br><span class="line">            <span class="keyword">int</span> s2 = fis.read(); <span class="comment">// 打印输入字符b对应的ascii码值98</span></span><br><span class="line">            <span class="keyword">int</span> s3 = fis.read(); <span class="comment">// 打印输入字符c 对应的ascii码值99</span></span><br><span class="line">            <span class="keyword">int</span> s4 = fis.read(); <span class="comment">// 由于文件内容已经读取完毕，返回-1</span></span><br><span class="line">            System.out.println(s1);</span><br><span class="line">            System.out.println(s2);</span><br><span class="line">            System.out.println(s3);</span><br><span class="line">            System.out.println(s4);</span><br><span class="line">            <span class="comment">// 流对象使用完，必须关闭！不然，总占用系统资源，最终会造成系统崩溃！</span></span><br><span class="line">            fis.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>常用手法:<br>每个字符挨个读取</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Testing2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1.创建源</span></span><br><span class="line">        File f = <span class="keyword">new</span> File(<span class="string">&quot;F:/Java/hyl.txt&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.选择流</span></span><br><span class="line">        FileInputStream is = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            is = <span class="keyword">new</span> FileInputStream(f);</span><br><span class="line">            <span class="comment">// 3. 操作(读取)</span></span><br><span class="line">            <span class="keyword">int</span> temp;</span><br><span class="line">            <span class="keyword">while</span> ((temp = is.read())!=-<span class="number">1</span>)&#123;</span><br><span class="line">                System.out.println((<span class="keyword">char</span>)temp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (is!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                    <span class="comment">// 释放资源</span></span><br><span class="line">                    is.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>分段读取</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">is = <span class="keyword">new</span> FileInputSream(src);</span><br><span class="line"><span class="keyword">byte</span>[] car = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>]; <span class="comment">// 缓冲容器</span></span><br><span class="line"><span class="keyword">int</span> len = -<span class="number">1</span>; <span class="comment">// 接受长度</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> ((len=is.read(car))!=-<span class="number">1</span>)&#123;</span><br><span class="line">    <span class="comment">//字节数组 --&gt; 字符串(解码)</span></span><br><span class="line">    String str = <span class="keyword">new</span> String(car,<span class="number">0</span>,len);</span><br><span class="line">    System.out.println(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>FileOutputStream</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Testing3</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1. 选择源</span></span><br><span class="line">        File dest = <span class="keyword">new</span> File(<span class="string">&quot;dest.txt&quot;</span>);</span><br><span class="line">        <span class="comment">// 2. 选择流</span></span><br><span class="line">        OutputStream os = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// true使用add，否则覆盖文件</span></span><br><span class="line">            os = <span class="keyword">new</span> FileOutputStream(dest,<span class="keyword">true</span>);</span><br><span class="line">            <span class="comment">// 3. 操作(写出)</span></span><br><span class="line">            String msg = <span class="string">&quot;hyl is sb&quot;</span>;</span><br><span class="line">            <span class="keyword">byte</span>[] datas = msg.getBytes(); <span class="comment">// 编码</span></span><br><span class="line">            os.write(datas,<span class="number">0</span>,datas.length);</span><br><span class="line">            os.flush();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="comment">// 4. 释放资源</span></span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (os!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                    <span class="comment">// 释放资源</span></span><br><span class="line">                    os.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>使用<code>FileInputStream</code>和<code>FileOutputStream</code>实现文件拷贝</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFileCopy</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">     <span class="comment">//将a.txt内容拷贝到b.txt</span></span><br><span class="line">     copyFile(<span class="string">&quot;d:/a.txt&quot;</span>, <span class="string">&quot;d:/b.txt&quot;</span>); </span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将src文件的内容拷贝到dec文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> src 源文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dec 目标文件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copyFile</span><span class="params">(String src, String dec)</span> </span>&#123;</span><br><span class="line">        FileInputStream fis = <span class="keyword">null</span>;</span><br><span class="line">        FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//为了提高效率，设置缓存数组！（读取的字节数据会暂存放到该字节数组中）</span></span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            fis = <span class="keyword">new</span> FileInputStream(src);</span><br><span class="line">            fos = <span class="keyword">new</span> FileOutputStream(dec);</span><br><span class="line">            <span class="comment">//边读边写</span></span><br><span class="line">            <span class="comment">//temp指的是本次读取的真实长度，temp等于-1时表示读取结束</span></span><br><span class="line">            <span class="keyword">while</span> ((temp = fis.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="comment">/*将缓存数组中的数据写入文件中，注意：写入的是读取的真实长度；</span></span><br><span class="line"><span class="comment">                 *如果使用fos.write(buffer)方法，那么写入的长度将会是1024，即缓存</span></span><br><span class="line"><span class="comment">                 *数组的长度*/</span></span><br><span class="line">                fos.write(buffer, <span class="number">0</span>, temp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//两个流需要分别关闭</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (fos != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    fos.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (fis != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    fis.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>在使用文件字节流时，我们需要注意以下两点：</p>
<ol>
<li>为了减少对硬盘的读写次数，提高效率，通常<strong>设置缓存数组</strong>。相应地，读取时使用的方法为：read(byte[] b);写入时的方法为：write(byte[ ] b, int off, int length)。</li>
<li>程序中如果遇到多个流，每个流都要单独关闭，防止其中一个流出现异常后导致其他流无法关闭的情况。</li>
</ol>
<h3 id="文件字符输入流FileReader与文件字符输出流FileWriter"><a href="#文件字符输入流FileReader与文件字符输出流FileWriter" class="headerlink" title="文件字符输入流FileReader与文件字符输出流FileWriter"></a>文件字符输入流FileReader与文件字符输出流FileWriter</h3><ul>
<li>FileReader：通过字符的方式读取文件，仅适合字符文件</li>
<li>FileWriter：通过字节的方式写出或追加数据到文件中，仅适合字符文件</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// FileReader</span></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Testing4</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1.创建源</span></span><br><span class="line">        File f = <span class="keyword">new</span> File(<span class="string">&quot;F:/Java/hyl.txt&quot;</span>);</span><br><span class="line">        <span class="comment">// 2.选择流</span></span><br><span class="line">        FileReader reader = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            reader = <span class="keyword">new</span> FileReader(f);</span><br><span class="line">            <span class="comment">// 3. 操作(读取)</span></span><br><span class="line">            <span class="keyword">char</span>[] buffer = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> ((len = reader.read(buffer))!=-<span class="number">1</span>)&#123;</span><br><span class="line">                String str = <span class="keyword">new</span> String(buffer,<span class="number">0</span>,len);</span><br><span class="line">                System.out.println(str);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (reader!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                    <span class="comment">// 释放资源</span></span><br><span class="line">                    reader.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// FileWriter</span></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Testing5</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1. 选择源</span></span><br><span class="line">        File dest = <span class="keyword">new</span> File(<span class="string">&quot;dest.txt&quot;</span>);</span><br><span class="line">        <span class="comment">// 2. 选择流</span></span><br><span class="line">        FileWriter writer = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            writer = <span class="keyword">new</span> FileWriter(dest);</span><br><span class="line">            <span class="comment">// 3. 操作(写出)</span></span><br><span class="line">            String msg = <span class="string">&quot;XXXXX&quot;</span>;</span><br><span class="line">            <span class="keyword">char</span>[] datas = msg.toCharArray();</span><br><span class="line">            writer.write(datas,<span class="number">0</span>,datas.length);</span><br><span class="line">            writer.flush();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="comment">// 4. 释放资源</span></span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (writer!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                    <span class="comment">// 释放资源</span></span><br><span class="line">                    writer.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>FileWriter有三种输出方式:<br><code>writer = new FileWriter(dest);</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">String msg = <span class="string">&quot;第一段内容,第二段内容&quot;</span>;</span><br><span class="line"><span class="keyword">char</span>[] datas = msg.toCharArray(); <span class="comment">// 字符串 -- &gt; 字符数组</span></span><br><span class="line">writer.write(datas,<span class="number">0</span>,datas.length);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">String msg1 = <span class="string">&quot;第一段内容&quot;</span>;</span><br><span class="line">String msg2 = <span class="string">&quot;第二段内容&quot;</span>;</span><br><span class="line"></span><br><span class="line">writer.write(msg1);</span><br><span class="line">writer.write(msg2);</span><br><span class="line">writer.flush();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">writer.append(<span class="string">&quot;第一段内容&quot;</span>).append(<span class="string">&quot;第二段内容&quot;</span>);</span><br><span class="line">writer.flush();</span><br></pre></td></tr></table></figure>



<p><strong>使用FileReader与FileWriter实现文本文件的复制</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFileCopy2</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">     <span class="comment">// 写法和使用Stream基本一样。只不过，读取时是读取的字符。</span></span><br><span class="line">     FileReader fr = <span class="keyword">null</span>;</span><br><span class="line">     FileWriter fw = <span class="keyword">null</span>;</span><br><span class="line">     <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">         fr = <span class="keyword">new</span> FileReader(<span class="string">&quot;d:/a.txt&quot;</span>);</span><br><span class="line">         fw = <span class="keyword">new</span> FileWriter(<span class="string">&quot;d:/d.txt&quot;</span>);</span><br><span class="line">         <span class="comment">//为了提高效率，创建缓冲用的字符数组</span></span><br><span class="line">         <span class="keyword">char</span>[] buffer = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>];</span><br><span class="line">         <span class="comment">//边读边写</span></span><br><span class="line">         <span class="keyword">while</span> ((len = fr.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">             fw.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">         &#125;</span><br><span class="line"></span><br><span class="line">     &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">     &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">     &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">         <span class="keyword">try</span> &#123;</span><br><span class="line">             <span class="keyword">if</span> (fw != <span class="keyword">null</span>) &#123;</span><br><span class="line">                 fw.close();</span><br><span class="line">             &#125;</span><br><span class="line">         &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">             e.printStackTrace();</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">try</span> &#123;</span><br><span class="line">             <span class="keyword">if</span> (fr != <span class="keyword">null</span>) &#123;</span><br><span class="line">                 fr.close();</span><br><span class="line">             &#125;</span><br><span class="line">         &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">             e.printStackTrace();</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="字节数组流ByteArrayInputStream和ByteArrayOutputStream"><a href="#字节数组流ByteArrayInputStream和ByteArrayOutputStream" class="headerlink" title="字节数组流ByteArrayInputStream和ByteArrayOutputStream"></a>字节数组流ByteArrayInputStream和ByteArrayOutputStream</h3><p>ByteArrayInputStream和ByteArrayOutputStream经常用在需要流和数组之间转化的情况</p>
<blockquote>
<p>说白了，FileInputStream是把文件当做数据源。ByteArrayInputStream则是把内存中的”某个字节数组对象”当做数据源。</p>
</blockquote>
<p>因为是使用内存的数据，所以<strong>不需要关闭</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.ByteArrayInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Testing2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1.创建源</span></span><br><span class="line">        <span class="keyword">byte</span>[] src = <span class="string">&quot;hyl is a sb&quot;</span>.getBytes();</span><br><span class="line">        <span class="comment">// 2.选择流</span></span><br><span class="line">        ByteArrayInputStream is = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            is = <span class="keyword">new</span> ByteArrayInputStream(src);</span><br><span class="line">            <span class="comment">// 3. 操作(分段读取)</span></span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">5</span>];</span><br><span class="line">            <span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> ((len = is.read(buffer))!=-<span class="number">1</span>)&#123;</span><br><span class="line">                String str = <span class="keyword">new</span> String(buffer,<span class="number">0</span>,len);</span><br><span class="line">                System.out.println(str);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) </span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Testing4</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 1.创建源</span></span><br><span class="line">        <span class="keyword">byte</span>[] dest = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">// 2.选择流</span></span><br><span class="line">        ByteArrayOutputStream os = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            os = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">            String msg = <span class="string">&quot;ABCDEFG&quot;</span>;</span><br><span class="line">            <span class="keyword">byte</span>[] datas = msg.getBytes();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 3. 操作(写入)</span></span><br><span class="line">            os.write(datas,<span class="number">0</span>,datas.length);</span><br><span class="line">            os.flush();</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 4. 获取数据</span></span><br><span class="line">            dest = os.toByteArray();</span><br><span class="line">            System.out.println(dest.toString());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>使用<code>FileInputStream</code>和<code>FileOutputStream</code>和<code>ByteArrayInputStream</code>和<code>ByteArrayOutputStream</code>实现图片文件的拷贝</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.ByteArrayInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Testing5</span> </span>&#123;</span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">     <span class="keyword">byte</span>[] datas = fileToByteArray(<span class="string">&quot;F:/Java/hyl.jpg&quot;</span>);</span><br><span class="line">     System.out.println(datas.length);</span><br><span class="line">     byteArrayToFile(datas, <span class="string">&quot;F:/Java/hyl2.jpg&quot;</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">// 将图片读取到字节数组</span></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">byte</span>[] fileToByteArray(String SrcFilePath) &#123;</span><br><span class="line">     <span class="comment">// 1. 创建源</span></span><br><span class="line">     File src = <span class="keyword">new</span> File(SrcFilePath);</span><br><span class="line">     <span class="comment">// 2. 选择流</span></span><br><span class="line">     FileInputStream is = <span class="keyword">null</span>;</span><br><span class="line">     ByteArrayOutputStream os = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">         is = <span class="keyword">new</span> FileInputStream(src);</span><br><span class="line">         os = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line"></span><br><span class="line">         <span class="comment">// 3. 操作(分段读取)</span></span><br><span class="line">         <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>*<span class="number">10</span>];</span><br><span class="line">         <span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">         <span class="keyword">while</span> ((len = is.read(buffer))!=-<span class="number">1</span>)&#123;</span><br><span class="line">             os.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">         &#125;</span><br><span class="line">         os.flush();</span><br><span class="line">         <span class="keyword">return</span> os.toByteArray();</span><br><span class="line"></span><br><span class="line">     &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">     &#125; <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">     &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">         <span class="comment">// 4. 释放资源</span></span><br><span class="line">         <span class="keyword">try</span> &#123;</span><br><span class="line">             <span class="keyword">if</span> (<span class="keyword">null</span> != is)&#123;</span><br><span class="line">                 is.close();</span><br><span class="line">             &#125;</span><br><span class="line">         &#125; <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">             e.printStackTrace();</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">null</span>; </span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">// 将字节数组写出到图片</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">byteArrayToFile</span><span class="params">(<span class="keyword">byte</span>[] src , String DestFilePath)</span> </span>&#123;</span><br><span class="line">     <span class="comment">// 1. 创建源</span></span><br><span class="line">     File dest = <span class="keyword">new</span> File(DestFilePath);</span><br><span class="line">     <span class="comment">// 2. 选择流</span></span><br><span class="line">     ByteArrayInputStream is = <span class="keyword">null</span>;</span><br><span class="line">     FileOutputStream os = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">         is = <span class="keyword">new</span> ByteArrayInputStream(src);</span><br><span class="line">         os = <span class="keyword">new</span> FileOutputStream(dest);</span><br><span class="line">         <span class="comment">// 3. 操作</span></span><br><span class="line">         <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">5</span>];</span><br><span class="line">         <span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">         <span class="keyword">while</span>((len=is.read(buffer))!=-<span class="number">1</span>)&#123;</span><br><span class="line">             os.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">         &#125;</span><br><span class="line">         os.flush();</span><br><span class="line">     &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">     &#125; <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">     &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">         <span class="comment">// 4. 释放资源</span></span><br><span class="line">         <span class="keyword">try</span> &#123;</span><br><span class="line">             <span class="keyword">if</span> (<span class="keyword">null</span> != is)&#123;</span><br><span class="line">                 is.close();</span><br><span class="line">             &#125;</span><br><span class="line">         &#125; <span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">             e.printStackTrace();</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="缓冲字节流BufferedInputStream和BufferedOutputStream"><a href="#缓冲字节流BufferedInputStream和BufferedOutputStream" class="headerlink" title="缓冲字节流BufferedInputStream和BufferedOutputStream"></a>缓冲字节流BufferedInputStream和BufferedOutputStream</h3><p>Java缓冲流本身并不具有IO流的读取与写入功能，只是在别的流(节点流或其他处理流)上加上缓冲功能提高效率，就像是把别的流包装起来一样，因此缓冲流是一种处理流(包装流)。</p>
<p>当对文件或者其他数据源进行频繁的读写操作时，效率比较低，这时如果使用缓冲流就能够更高效的读写信息。因为缓冲流是先将数据缓存起来，然后当缓存区存满后或者手动刷新时再一次性的读取到程序或写入目的地。</p>
<p>BufferedInputStream和BufferedOutputStream这两个流是缓冲字节流，通过内部缓存数组来提高操作流的效率。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">student4</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        File f = <span class="keyword">new</span> File(<span class="string">&quot;F:/Java/hyl.txt&quot;</span>);</span><br><span class="line">        FileInputStream is = <span class="keyword">null</span>;</span><br><span class="line">        BufferedInputStream bis = <span class="keyword">null</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            is = <span class="keyword">new</span> FileInputStream(f);</span><br><span class="line">            bis = <span class="keyword">new</span> BufferedInputStream(is);</span><br><span class="line">            <span class="keyword">byte</span>[] car = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>]; </span><br><span class="line">            <span class="keyword">int</span> len = -<span class="number">1</span>; </span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span> ((len=is.read(car))!=-<span class="number">1</span>)&#123;</span><br><span class="line">                String str = <span class="keyword">new</span> String(car,<span class="number">0</span>,len);</span><br><span class="line">                System.out.println(str);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (is!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                    is.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (bis!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                    is.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong></p>
<ol>
<li><p>在关闭流时，应该先关闭最外层的包装流，即“后开的先关闭”。</p>
</li>
<li><p>缓存区的大小默认是8192字节(8K)，也可以使用其它的构造方法自己指定大小。</p>
</li>
</ol>
<p>FileInputStream :</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.创建源</span></span><br><span class="line">File f = <span class="keyword">new</span> File(<span class="string">&quot;F:/Java/hyl.txt&quot;</span>);</span><br><span class="line"><span class="comment">// 2.选择流</span></span><br><span class="line">FileInputStream is = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> is = <span class="keyword">new</span> FileInputStream(f);</span><br><span class="line"> <span class="comment">// 3. 操作(读取)</span></span><br><span class="line"> <span class="keyword">int</span> temp;</span><br><span class="line"> <span class="keyword">while</span> ((temp = is.read())!=-<span class="number">1</span>)&#123;</span><br><span class="line">     System.out.println((<span class="keyword">char</span>)temp);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>BufferedInputStream : </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.创建源</span></span><br><span class="line">File f = <span class="keyword">new</span> File(<span class="string">&quot;F:/Java/hyl.txt&quot;</span>);</span><br><span class="line"><span class="comment">// 2.选择流</span></span><br><span class="line">FileInputStream is = <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">// 添加了这一句</span></span><br><span class="line">BufferedInputStream bis = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"> is = <span class="keyword">new</span> FileInputStream(f);</span><br><span class="line"> <span class="comment">// 添加了这一句</span></span><br><span class="line"> bis = <span class="keyword">new</span> BufferedInputStream(is)</span><br><span class="line"> <span class="keyword">byte</span>[] car = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>]; </span><br><span class="line"> <span class="keyword">int</span> len = -<span class="number">1</span>; </span><br><span class="line"></span><br><span class="line"> <span class="keyword">while</span> ((len=is.read(car))!=-<span class="number">1</span>)&#123;</span><br><span class="line">     String str = <span class="keyword">new</span> String(car,<span class="number">0</span>,len);</span><br><span class="line">     System.out.println(str);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>我们发现<strong>这只是添加了一个装饰器而已</strong></p>
<p>所以,我们可以将</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">is = <span class="keyword">new</span> FileInputStream(f);</span><br></pre></td></tr></table></figure>

<p>改为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">is = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(src));</span><br></pre></td></tr></table></figure>

<p>同理，遇到<code>FileOutputStream</code>的话就可以使用<code>BufferedOutputStream</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">is = <span class="keyword">new</span> BufferedOutputStream(<span class="keyword">new</span> FileOutputStream(dest));</span><br></pre></td></tr></table></figure>



<p>最终为:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">student5</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        File f = <span class="keyword">new</span> File(<span class="string">&quot;F:/Java/hyl.txt&quot;</span>);</span><br><span class="line">        BufferedInputStream is = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 修改本句</span></span><br><span class="line">            is = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(f));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">byte</span>[] car = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>]; </span><br><span class="line">            <span class="keyword">int</span> len = -<span class="number">1</span>; </span><br><span class="line">            </span><br><span class="line">            <span class="keyword">while</span> ((len=is.read(car))!=-<span class="number">1</span>)&#123;</span><br><span class="line">                String str = <span class="keyword">new</span> String(car,<span class="number">0</span>,len);</span><br><span class="line">                System.out.println(str);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span>&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (is!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                    is.close();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">catch</span>(IOException e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="缓冲字符流BufferedReader和BufferedWriter"><a href="#缓冲字符流BufferedReader和BufferedWriter" class="headerlink" title="缓冲字符流BufferedReader和BufferedWriter"></a>缓冲字符流BufferedReader和BufferedWriter</h3><ul>
<li>增加了缓存机制，大大提高了读写文本文件的效率，</li>
<li>同时，提供了更方便的按行读取的方法：readLine(); </li>
</ul>
<p>同理，我们可以将</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">is = <span class="keyword">new</span> FileReader(src);</span><br><span class="line">is = <span class="keyword">new</span> FileWriter(dest);</span><br></pre></td></tr></table></figure>

<p>改为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">is = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileWriter(src));</span><br><span class="line">is = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(dest));</span><br></pre></td></tr></table></figure>



<p>同时我们还可以使用他的readLine方法:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(f));</span><br><span class="line">    String line = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">while</span> ((line=reader.readLine())!=<span class="keyword">null</span>)&#123;</span><br><span class="line">        System.out.println(line);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>还要有一个newLine方法:</p>
<p>将</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">writer.append(<span class="string">&quot;第一段内容/r/n&quot;</span>).append(<span class="string">&quot;第二段内容/r/n&quot;</span>);</span><br><span class="line">writer.flush();</span><br></pre></td></tr></table></figure>

<p>改为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">writer.append(<span class="string">&quot;第一段内容&quot;</span>);</span><br><span class="line">writer.newLine();</span><br><span class="line">writer.append(<span class="string">&quot;第二段内容&quot;</span>);</span><br><span class="line">writer.newLine();</span><br><span class="line">writer.flush();</span><br></pre></td></tr></table></figure>



<h3 id="转换流InputStreamReader和OutputStreamWriter"><a href="#转换流InputStreamReader和OutputStreamWriter" class="headerlink" title="转换流InputStreamReader和OutputStreamWriter"></a>转换流InputStreamReader和OutputStreamWriter</h3><p>InputStreamReader/OutputStreamWriter用来实现将字节流转化成字符流。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Testing3</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> ( BufferedReader reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">        BufferedWriter writer = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(System.out));) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 循环获取键盘的输入(exit退出)，输出此内容</span></span><br><span class="line">            String msg = <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">while</span> (! msg.equals(<span class="string">&quot;exit&quot;</span>))&#123;</span><br><span class="line">                msg = reader.readLine();</span><br><span class="line">                writer.write(msg);</span><br><span class="line">                writer.newLine();</span><br><span class="line">                writer.flush();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;操作异常&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="数据流DataInputStream和DataOutputStream"><a href="#数据流DataInputStream和DataOutputStream" class="headerlink" title="数据流DataInputStream和DataOutputStream"></a>数据流DataInputStream和DataOutputStream</h3><p>数据流将<code>基本数据类型与字符串类型</code>作为数据源，从而允许程序以与机器无关的方式从底层输入输出流中操作Java基本数据类型与字符串类型。</p>
<p>DataInputStream和DataOutputStream提供了可以存取与机器无关的所有Java基础类型数据(如：int、double、String等)的方法。</p>
<p>使用数据流时，读取的顺序一定要与写入的顺序一致，否则不能正确读取数据。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.DataInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.DataOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Testing4</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 写入</span></span><br><span class="line">        ByteArrayOutputStream baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">        DataOutputStream dos = <span class="keyword">new</span> DataOutputStream(<span class="keyword">new</span> BufferedOutputStream(baos));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 操作数据类型 + 数据</span></span><br><span class="line">        dos.writeUTF(<span class="string">&quot;何应良&quot;</span>);</span><br><span class="line">        dos.writeInt(<span class="number">18</span>);</span><br><span class="line">        dos.writeBoolean(<span class="keyword">false</span>);</span><br><span class="line">        dos.writeChar(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">        dos.flush();</span><br><span class="line">        <span class="keyword">byte</span>[] datas = baos.toByteArray();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 读取</span></span><br><span class="line">        DataInputStream dis = <span class="keyword">new</span> DataInputStream(<span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> ByteArrayInputStream(datas)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 顺序与写出一致</span></span><br><span class="line">        String msg = dis.readUTF();</span><br><span class="line">        <span class="keyword">int</span> age = dis.readInt();</span><br><span class="line">        <span class="keyword">boolean</span> flag = dis.readBoolean();</span><br><span class="line">        <span class="keyword">char</span> ch = dis.readChar();</span><br><span class="line">        System.out.println(flag);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="对象流ObjectInputStream-ObjectOutputStream"><a href="#对象流ObjectInputStream-ObjectOutputStream" class="headerlink" title="对象流ObjectInputStream/ObjectOutputStream"></a>对象流ObjectInputStream/ObjectOutputStream</h3><p>我们前边学到的数据流只能实现对基本数据类型和字符串类型的读写，并不能读取对象(字符串除外)，如果要对某个对象进行读写操作，我们需要学习一对新的处理流：ObjectInputStream/ObjectOutputStream。</p>
<p>ObjectInputStream/ObjectOutputStream是以<code>对象</code>为数据源，但是必须将传输的对象进行序列化与反序列化操作。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException,ClassNotFoundException</span>&#123;</span><br><span class="line">        <span class="comment">// 写出</span></span><br><span class="line">        ByteArrayOutputStream baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">        ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> BufferedOutputStream(baos));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 操作数据类型 </span></span><br><span class="line">        oos.writeUTF(<span class="string">&quot;hyl&quot;</span>);</span><br><span class="line">        oos.writeInt(<span class="number">18</span>);</span><br><span class="line">        oos.writeBoolean(<span class="keyword">false</span>);</span><br><span class="line">        oos.writeChar(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">        <span class="comment">// 添加对象</span></span><br><span class="line">        oos.writeObject(<span class="string">&quot;字符串也是对象，而且字符串可序列化&quot;</span>);</span><br><span class="line">        oos.writeObject(<span class="keyword">new</span> Person());</span><br><span class="line"></span><br><span class="line">        oos.flush();</span><br><span class="line">        <span class="keyword">byte</span>[] datas = baos.toByteArray();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 读取</span></span><br><span class="line">        ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> ByteArrayInputStream(datas)));</span><br><span class="line"></span><br><span class="line">        String msg = ois.readUTF();</span><br><span class="line">        <span class="keyword">int</span> age = ois.readInt();</span><br><span class="line">        <span class="keyword">boolean</span> flag = ois.readBoolean();</span><br><span class="line">        <span class="keyword">char</span> ch = ois.readChar();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 读取对象</span></span><br><span class="line">        Object str = ois.readObject();</span><br><span class="line">        Object person = ois.readObject();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(str <span class="keyword">instanceof</span> String)&#123;</span><br><span class="line">            String strObj = (String) str;</span><br><span class="line">            System.out.println(strObj);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(person <span class="keyword">instanceof</span> Person)&#123;</span><br><span class="line">            Person personObj = (Person) person;</span><br><span class="line">            System.out.println(personObj);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        System.out.println(flag);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Person类必须实现Serializable接口</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>对于某些不想被序列化的属性，可以添加一个<code>transient</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"> <span class="keyword">private</span> String name;</span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>改为</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Serializable</span></span>&#123;</span><br><span class="line"> <span class="keyword">private</span> String name;</span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>注意</strong></p>
<ol>
<li>对象流不仅可以读写对象，还可以读写基本数据类型。</li>
<li>使用对象流读写对象时，该对象必须序列化与反序列化。</li>
<li>系统提供的类(如Date等)已经实现了序列化接口，自定义类必须手动实现序列化接口。</li>
</ol>
<h3 id="打印流PrintSream和PrintWriter"><a href="#打印流PrintSream和PrintWriter" class="headerlink" title="打印流PrintSream和PrintWriter"></a>打印流PrintSream和PrintWriter</h3><p>Printstream将功能添加到另一个输出流，即能够方便地打印各种数据值的表示。</p>
<p>还提供了另外两个功能。</p>
<ol>
<li>不像其他输出流，一个 Printstream从不抛出一个要IOException；相反，异常情况只是设置一个可以通过 checkEr方法测试的内部标志。</li>
<li>可选地，可以创建 Printstream以便自动刷撕；这意味看1uh方法在少字节数组之后自动调用，其中一个 print1n方法被调用，或换行字符（“\n’）被写入使用平台的认字符编码将 Printstream打印的所换为字节。Printriter类应该在需要写入字符而不是字节的情况下使用</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Testing2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException </span>&#123;</span><br><span class="line">        PrintStream ps = System.out;</span><br><span class="line">        ps.println(<span class="string">&quot;打印流&quot;</span>);</span><br><span class="line"></span><br><span class="line">        ps = <span class="keyword">new</span> PrintStream(<span class="keyword">new</span> BufferedOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">&quot;print.txt&quot;</span>)),<span class="keyword">true</span>);</span><br><span class="line">        ps.println(<span class="keyword">true</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 重定向输出端</span></span><br><span class="line">        System.setOut(ps);</span><br><span class="line">        System.out.println(<span class="string">&quot;hyl&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Testing3</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException </span>&#123;</span><br><span class="line">        PrintWriter pw = <span class="keyword">new</span> PrintWriter(<span class="keyword">new</span> BufferedOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">&quot;print.txt&quot;</span>)),<span class="keyword">true</span>);</span><br><span class="line">        pw.println(<span class="string">&quot;打印流&quot;</span>);</span><br><span class="line">        pw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="随机流RandomAccessFile"><a href="#随机流RandomAccessFile" class="headerlink" title="随机流RandomAccessFile"></a>随机流RandomAccessFile</h3><ol>
<li>随机流有点像迅雷下载，随机下载同一个文件的不同的部分</li>
<li>所以，我们必须在此之前对文件进行分割</li>
</ol>
<p>RandomAccessFile :<br>该类的实例支持<strong>读取和写入随机访问文件</strong>。随机访问文件的行为类似于存储在文件系统中的大量字节。</p>
<ul>
<li>有一种游标，或索引倒到隐含的数组，称为<code>文件指针</code>；</li>
<li>输入操作读取从文件指针开始的字节，并使文件指针超过读取的字节。如果在读/写模式下创建随机访问文件，则出操作也可用；</li>
<li>输出操作从文伴指针开始写入字节，并将文件指针提前到写入的字节。写入隐式数组的当前端的输出操作会导致扩展数组。文件指针可以通过读取getpointer方法由设置seek方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.RandomAccessFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Testing</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        RandomAccessFile raf = <span class="keyword">new</span> RandomAccessFile(<span class="keyword">new</span> File(<span class="string">&quot;D:/tasks.json&quot;</span>), <span class="string">&quot;r&quot;</span>);</span><br><span class="line">        <span class="comment">// 随机读取</span></span><br><span class="line">        raf.seek(<span class="number">20</span>);</span><br><span class="line">        <span class="comment">// 读取</span></span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>]; <span class="comment">// 缓冲容器</span></span><br><span class="line">        <span class="keyword">int</span> len = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>((len = raf.read(buffer))!= -<span class="number">1</span>)&#123;</span><br><span class="line">            System.out.println(<span class="keyword">new</span> String(buffer,<span class="number">0</span>,len));</span><br><span class="line">        &#125;</span><br><span class="line">        raf.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Testing</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person p = <span class="keyword">new</span> Person();</span><br><span class="line">        p.say();</span><br><span class="line"></span><br><span class="line">        Amplifier am = <span class="keyword">new</span> Amplifier(p);</span><br><span class="line">        am.say();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Say</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">say</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Say</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> voice = <span class="number">10</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">say</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>.getVoice());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getVoice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> voice;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setVoice</span><span class="params">(<span class="keyword">int</span> voice)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.voice = voice;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Amplifier</span> <span class="keyword">implements</span> <span class="title">Say</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Person p;</span><br><span class="line">    Amplifier(Person p)&#123;</span><br><span class="line">        <span class="keyword">this</span>.p = p;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">say</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(p.getVoice()*<span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模拟咖啡</span></span><br><span class="line"><span class="comment">// 抽象组件：需要装饰的抽象对象(接口或抽象父类)</span></span><br><span class="line"><span class="comment">// 具体组件：需要装饰的对象</span></span><br><span class="line"><span class="comment">// 抽象装饰类：包含了对抽象组件的引用以及装饰着共有的方法</span></span><br><span class="line"><span class="comment">// 具体装饰类：被装饰的对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Testing2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Drink coffee = <span class="keyword">new</span> Coffee();</span><br><span class="line"></span><br><span class="line">        Drink suger = <span class="keyword">new</span> Suger(coffee);</span><br><span class="line">        System.out.println(suger.info() + <span class="string">&quot;--&gt;&quot;</span> + suger.cost());</span><br><span class="line"></span><br><span class="line">        Drink milk = <span class="keyword">new</span> Milk(coffee);</span><br><span class="line">        System.out.println(milk.info() + <span class="string">&quot;--&gt;&quot;</span> + milk.cost());</span><br><span class="line"></span><br><span class="line">        milk = <span class="keyword">new</span> Milk(suger);</span><br><span class="line">        System.out.println(milk.info() + <span class="string">&quot;--&gt;&quot;</span> + milk.cost());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 抽象组件</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Drink</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">cost</span><span class="params">()</span></span>; <span class="comment">// 费用</span></span><br><span class="line">    <span class="function">String <span class="title">info</span><span class="params">()</span></span>; <span class="comment">// 说明</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体组件</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Coffee</span> <span class="keyword">implements</span> <span class="title">Drink</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name = <span class="string">&quot;原味咖啡&quot;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">cost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">info</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 抽象装饰类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Decorate</span> <span class="keyword">implements</span> <span class="title">Drink</span></span>&#123;</span><br><span class="line">    <span class="comment">// 对抽象组件的引用</span></span><br><span class="line">    <span class="keyword">private</span> Drink drink;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Decorate</span><span class="params">(Drink drink)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.drink = drink;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">cost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.drink.cost();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">info</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.drink.info();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体装饰类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Milk</span> <span class="keyword">extends</span> <span class="title">Decorate</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Milk</span><span class="params">(Drink drink)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(drink);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">cost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.cost() * <span class="number">4</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">info</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.info() + <span class="string">&quot;加入了牛奶&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体装饰类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Suger</span> <span class="keyword">extends</span> <span class="title">Decorate</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Suger</span><span class="params">(Drink drink)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(drink);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">cost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.cost() * <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">info</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.info() + <span class="string">&quot;加入了蔗糖&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>









</div></div></article><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>