<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=" id=&quot;Webpack是什么&quot;&gt;&lt;a href=&quot;#Webpack是什么&quot; class=&quot;headerlink&quot; title=&quot;Webpack是什么&quot;&gt;&lt;/a&gt;Webpack是什么&lt;/h2&gt;&lt;p&gt;Webpack是&lt;strong&gt;JavaScript&lt;/strong&gt;应用程序的静态模块&lt;strong&gt;打包器&lt;/strong&gt;"><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><title>Webpack快速入门 | 凉薄的自动书记人偶</title><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Hexo 5.4.0"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Tags</a><a class="sidebar-nav-item" href="/About">About</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Webpack/" rel="tag">Webpack</a></div><div class="post-time">2020-07-25</div></div></div><div class="container post-header"><h1>Webpack快速入门</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Webpack%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.</span> <span class="toc-text">Webpack是什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">2.</span> <span class="toc-text">作用域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%AF%BC%E5%87%BA%E6%9C%BA%E5%88%B6%E7%9A%84%E6%BC%94%E5%8F%98%E5%8E%86%E5%8F%B2"><span class="toc-number">3.</span> <span class="toc-text">模块导出机制的演变历史</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#AMD"><span class="toc-number">3.1.</span> <span class="toc-text">AMD</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CommonJS"><span class="toc-number">3.2.</span> <span class="toc-text">CommonJS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ES6-Module"><span class="toc-number">3.3.</span> <span class="toc-text">ES6 Module</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97"><span class="toc-number">4.</span> <span class="toc-text">模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Webpack%E7%9A%84%E6%89%93%E5%8C%85%E9%80%BB%E8%BE%91"><span class="toc-number">5.</span> <span class="toc-text">Webpack的打包逻辑</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#npm%E4%B8%8E%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8"><span class="toc-number">6.</span> <span class="toc-text">npm与包管理器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%88%E6%9C%AC%E8%AF%AD%E4%B9%89%E5%8C%96"><span class="toc-number">7.</span> <span class="toc-text">版本语义化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#npm-install%E7%9A%84%E8%BF%87%E7%A8%8B"><span class="toc-number">8.</span> <span class="toc-text">npm install的过程</span></a></li></ol></details></div><div class="container post-content"><h2 id="Webpack是什么"><a href="#Webpack是什么" class="headerlink" title="Webpack是什么"></a>Webpack是什么</h2><p>Webpack是<strong>JavaScript</strong>应用程序的静态模块<strong>打包器</strong></p>
<ul>
<li>逻辑多,文件多,项目的复杂度提高了.就是因为Webpack是打包神器</li>
<li>Wepack能支持翻译能力</li>
<li>可插拔</li>
</ul>
<h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><p>全局变量是挂在的在<code>全局对象</code>上的</p>
<ul>
<li>在windows的全局对象是windows</li>
<li>在Mac的全局对象是brower</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.a <span class="comment">// 这里就能拿到</span></span><br></pre></td></tr></table></figure>



<p>我们在页面上引入的script文件是全局的,因此文件里面的变量也是全局的,这样就有可能造成作用域被污染,变量发生冲突</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/.moduleA.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/.moduleB.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;/.moduleC.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这时可以考虑使用闭包</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// moduleA.js</span></span><br><span class="line"><span class="comment">// 此时name和sex已经被存缓好了,可以被return的function访问</span></span><br><span class="line"><span class="comment">// 这样name和age就被保护(隐藏)起来了,因为这样外部就访问不到他们了</span></span><br><span class="line"><span class="keyword">var</span> moduleA= (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">              <span class="keyword">var</span> name = <span class="string">&quot;susan&quot;</span></span><br><span class="line">              <span class="keyword">var</span> sex = <span class="string">&quot;nv&quot;</span></span><br><span class="line">              <span class="keyword">return</span> &#123;</span><br><span class="line">                  <span class="attr">tell</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                      <span class="built_in">console</span>.log(<span class="string">&quot;my name is &quot;</span>,name)</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<p>第二种写法:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&quot;susan&quot;</span></span><br><span class="line">    <span class="keyword">var</span> sex =<span class="string">&quot;nv&quot;</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">tell</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;my name is &quot;</span>,name)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">window</span>.susanModule = &#123; tell  &#125;</span><br><span class="line">&#125;)(<span class="built_in">window</span>)</span><br></pre></td></tr></table></figure>



<h2 id="模块导出机制的演变历史"><a href="#模块导出机制的演变历史" class="headerlink" title="模块导出机制的演变历史"></a>模块导出机制的演变历史</h2><h3 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h3><p><code>asynchronous Module Definition</code>:异步模块定义</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一参数:模块的名字</span></span><br><span class="line"><span class="comment">// 第二参数:模块的依赖</span></span><br><span class="line"><span class="comment">// 第三参数:模块的导出</span></span><br><span class="line">define(<span class="string">&quot;getSum&quot;</span>, [<span class="string">&quot;math&quot;</span>], <span class="function"><span class="keyword">function</span>(<span class="params">math</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;sum:&quot;</span>, math.sum(a,b))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h3 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过require函数来引入</span></span><br><span class="line"><span class="keyword">const</span> math = <span class="built_in">require</span>(<span class="string">&quot;./math&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过exports将其导出</span></span><br><span class="line"><span class="built_in">exports</span>.getSum = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="ES6-Module"><a href="#ES6-Module" class="headerlink" title="ES6 Module"></a>ES6 Module</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import 导入</span></span><br><span class="line"><span class="keyword">import</span> math <span class="keyword">from</span> <span class="string">&quot;./math&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// export 导出</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><ul>
<li>作用域封装</li>
<li>重用性</li>
<li>接触耦合</li>
</ul>
<h2 id="Webpack的打包逻辑"><a href="#Webpack的打包逻辑" class="headerlink" title="Webpack的打包逻辑"></a>Webpack的打包逻辑</h2><ul>
<li>从入口文件开始,分析整个应用的依赖树</li>
<li>将每个依赖模块包装起来,放到一个数组中 等待调用</li>
<li>实现模块加载方法,并把它放到模块执行的环境中,确保模块间可以互相调用</li>
<li>把执行入口文件的逻辑放在一个函数表达式中,并立即执行这个函数</li>
</ul>
<h2 id="npm与包管理器"><a href="#npm与包管理器" class="headerlink" title="npm与包管理器"></a>npm与包管理器</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 初始化包</span></span><br><span class="line">npm init</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;demo&quot;</span>, <span class="comment">// 包名称</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span>:<span class="string">&quot;1.1.0&quot;</span>, </span><br><span class="line">    <span class="attr">&quot;description&quot;</span>:<span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;main&quot;</span>:<span class="string">&quot;index.js&quot;</span> <span class="comment">// 执行入口</span></span><br><span class="line">    <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;test&quot;</span>:<span class="string">&quot;each \&quot;Error :no test spified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">    &#125;, <span class="comment">// 自定义脚本</span></span><br><span class="line">    <span class="attr">&quot;author&quot;</span>:<span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;license&quot;</span>:<span class="string">&quot;ISC&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 设置淘宝镜像仓库</span></span><br><span class="line">npm config set registry https://npm.taobao.org</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> save的功能:自动将下载的包写入package.json的dependencies字段</span></span><br><span class="line">npm install lodash -s</span><br><span class="line"><span class="meta">#</span><span class="bash"> or</span></span><br><span class="line">npm install lodash --save</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 写入package.json的devDependencies字段</span></span><br><span class="line">npm install lodash --save-dev</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 默认-s参数,所以会同时写入dependencies字段和devDependencies字段</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果想写入一个的话,使用only</span></span><br><span class="line">npm insall --only=dev</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 删除所有的包,然后重装</span></span></span><br><span class="line">rm -rf node_modules &amp;&amp; npm install</span><br></pre></td></tr></table></figure>



<h2 id="版本语义化"><a href="#版本语义化" class="headerlink" title="版本语义化"></a>版本语义化</h2><ul>
<li><p>1.2.3:大版本为1,中版本为2,小版本为3</p>
</li>
<li><p><code>^version</code>:中版本中最新的版本</p>
<ul>
<li><code>^1.0.1</code>:对于所有形为<code>1.x.x</code>版本中,<code>1.0.1</code>是最新的版本</li>
</ul>
</li>
<li><p><code>~version</code>:小版本中最新的版本</p>
<ul>
<li><code>~1.0.1</code>:对于所有形为<code>1.0.x</code>版本中,<code>1.0.1</code>是最新的版本</li>
</ul>
</li>
</ul>
<h2 id="npm-install的过程"><a href="#npm-install的过程" class="headerlink" title="npm install的过程"></a>npm install的过程</h2><ol>
<li>寻找包版本信息文件(<code>package.json</code>),依照他进行安装</li>
<li>查package.json中的依赖,并检查项目中其他的版本信息文件</li>
<li>如果发现了新包,就更新版本信息文件</li>
<li></li>
</ol>
</div></div></article><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>