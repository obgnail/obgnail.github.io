<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=" id=&quot;地址&quot;&gt;&lt;a href=&quot;#地址&quot; class=&quot;headerlink&quot; title=&quot;地址&quot;&gt;&lt;/a&gt;地址&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/xiao-apple36/p/9089027.html&quot;&gt;Python–Click&lt;/a&gt;"><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><title>click | 凉薄的自动书记人偶</title><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Hexo 5.4.0"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Tags</a><a class="sidebar-nav-item" href="/About">About</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Python/" rel="tag">Python</a></div><div class="post-time">2020-03-12</div></div></div><div class="container post-header"><h1>click</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80"><span class="toc-number">1.</span> <span class="toc-text">地址</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">1.1.</span> <span class="toc-text">基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E5%8A%9F%E8%83%BD"><span class="toc-number">1.2.</span> <span class="toc-text">方法功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.1.</span> <span class="toc-text">方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0"><span class="toc-number">1.2.2.</span> <span class="toc-text">参数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#hide-input%E5%92%8Cconfirmation-promt%E8%AF%B4%E6%98%8E"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">hide_input和confirmation_promt说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#prompt%E8%AF%B4%E6%98%8E"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">prompt说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#help%E8%AF%B4%E6%98%8E"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">help说明</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%B9%E5%8F%98%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%89%A7%E8%A1%8C"><span class="toc-number">1.3.</span> <span class="toc-text">改变命令行程序的执行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#click-argument"><span class="toc-number">1.4.</span> <span class="toc-text">click.argument</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8D%E5%AE%9A%E5%8F%82%E6%95%B0"><span class="toc-number">1.5.</span> <span class="toc-text">不定参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Group"><span class="toc-number">1.6.</span> <span class="toc-text">Group</span></a></li></ol></li></ol></details></div><div class="container post-content"><h1 id="地址"><a href="#地址" class="headerlink" title="地址"></a>地址</h1><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiao-apple36/p/9089027.html">Python–Click</a></p>
<ul>
<li>Click的开发初衷就是使用最少的代码，以一种可组合的方式创建漂亮的<code>命令行接口</code>。</li>
<li>它的目的是使编写命令行工具的过程快速而有趣，同时防止由于无法实现预期的CLI API而导致的任何问题。</li>
</ul>
<h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># demo.py</span></span><br><span class="line"><span class="keyword">import</span> click</span><br><span class="line"></span><br><span class="line"><span class="meta">@click.command()</span></span><br><span class="line"><span class="meta">@click.option(<span class="params"><span class="string">&quot;--count&quot;</span>, <span class="string">&#x27;-c&#x27;</span>, default=<span class="number">1</span>, <span class="built_in">help</span>=<span class="string">&quot;打印次数&quot;</span>, <span class="built_in">type</span>=<span class="built_in">int</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span>(<span class="params">count</span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(count):</span><br><span class="line">        click.echo(<span class="string">&#x27;Hello World!&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    hello()</span><br></pre></td></tr></table></figure>

<p>对于上面的代码 , 我们在cmd</p>
<ul>
<li>执行 <code>python demo.py</code> 就可以返回Hello World!</li>
<li>执行 <code>python demo.py --count 3</code> 就可以打印三个Hello World!</li>
<li><code>-c</code> 是 <code>--count</code> 的简写 , 所以执行 <code>python demo.py --c 3</code> 打印三个Hello World!</li>
</ul>
<h2 id="方法功能"><a href="#方法功能" class="headerlink" title="方法功能"></a>方法功能</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># demo.py</span></span><br><span class="line"><span class="keyword">import</span> click</span><br><span class="line"></span><br><span class="line"><span class="meta">@click.command()</span></span><br><span class="line"><span class="meta">@click.option(<span class="params"><span class="string">&quot;--name&quot;</span>, default=<span class="string">&quot;li&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;your name&quot;</span></span>)</span></span><br><span class="line"><span class="meta">@click.option(<span class="params"><span class="string">&quot;--age&quot;</span>, default=<span class="number">26</span>, <span class="built_in">help</span>=<span class="string">&quot;your age&quot;</span></span>)</span></span><br><span class="line"><span class="meta">@click.option(<span class="params"><span class="string">&#x27;--gender&#x27;</span>, <span class="built_in">type</span>=click.Choice(<span class="params">[<span class="string">&#x27;man&#x27;</span>, <span class="string">&#x27;woman&#x27;</span>]</span>)</span>)    </span><span class="comment"># 限定值</span></span><br><span class="line"><span class="meta">@click.option(<span class="params"><span class="string">&#x27;--parents&#x27;</span>, nargs=<span class="number">2</span>, <span class="built_in">type</span>=string, <span class="built_in">help</span>=<span class="string">&#x27;your father and mother&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">@click.option(<span class="params"><span class="string">&#x27;--password&#x27;</span>, prompt=<span class="literal">True</span>, hide_input=<span class="literal">True</span>, confirmation_prompt=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span>(<span class="params">name, age</span>):</span></span><br><span class="line">    click.echo(name)</span><br><span class="line">    <span class="built_in">print</span>(age)</span><br><span class="line"></span><br><span class="line">hello_world()</span><br></pre></td></tr></table></figure>



<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><ul>
<li>command：用于装饰一个函数，使得该函数作为命令行的接口，例如上述装饰hello_world</li>
<li>option：用于装饰一个函数，主要功能是为命令行添加选项</li>
<li>echo：用于输出结果，由于print函数在2.x和3.x之间存在不同之处，为了更好的兼容性，因此提供了echo输出方法</li>
</ul>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><ul>
<li>default: 设置命令行参数的默认值</li>
<li>help: 参数说明</li>
<li>type: 参数类型，可以是 string, int, float 等</li>
<li>Choice：输入为一个列表，列表中为选项可选择的值</li>
<li>prompt: 当在命令行中没有输入相应的参数时，会根据 prompt 提示用户输入</li>
<li>nargs: 指定命令行参数接收的值的个数</li>
<li>hide_input: 用于隐藏输入(用于输入密码)</li>
<li>confirmation_promt: 用于重复输入(用于重复输入密码)</li>
<li>metavar：如何在帮助页面表示值</li>
</ul>
<h4 id="hide-input和confirmation-promt说明"><a href="#hide-input和confirmation-promt说明" class="headerlink" title="hide_input和confirmation_promt说明"></a>hide_input和confirmation_promt说明</h4><blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> click</span><br><span class="line"></span><br><span class="line"><span class="meta">@click.command()</span></span><br><span class="line"><span class="meta">@click.option(<span class="params"><span class="string">&#x27;--password&#x27;</span>, prompt=<span class="literal">True</span>, hide_input=<span class="literal">True</span>, confirmation_prompt=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">input_password</span>(<span class="params">password</span>):</span></span><br><span class="line">    click.echo(<span class="string">&#x27;password: %s&#x27;</span> % password)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    input_password()</span><br></pre></td></tr></table></figure>

<p>可以简写成</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> click</span><br><span class="line"></span><br><span class="line"><span class="meta">@click.command()</span></span><br><span class="line"><span class="meta">@click.password_option()</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">input_password</span>(<span class="params">password</span>):</span></span><br><span class="line">    click.echo(<span class="string">&#x27;password: %s&#x27;</span> % password)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    input_password()</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="prompt说明"><a href="#prompt说明" class="headerlink" title="prompt说明"></a>prompt说明</h4><blockquote>
<p>prompt : 有些命令行工具在运行的时候要求用户输入信息，可以给 <code>option</code> 装饰器指定 <code>prompt</code> 参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;<span class="keyword">import</span> click</span><br><span class="line"></span><br><span class="line">&gt;@click.command()</span><br><span class="line">&gt;@click.option(<span class="string">&quot;--count&quot;</span>, default=<span class="number">1</span>, <span class="built_in">help</span>=<span class="string">&quot;打印次数&quot;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>)</span><br><span class="line">&gt;@click.option(<span class="string">&quot;--name&quot;</span>, prompt=<span class="string">&quot;请输入名字&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;姓名&quot;</span>)</span><br><span class="line">&gt;<span class="function"><span class="keyword">def</span> <span class="title">hello</span>(<span class="params">count, name</span>):</span></span><br><span class="line">   <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(count):</span><br><span class="line">       click.echo(<span class="string">f&#x27;Hello <span class="subst">&#123;name&#125;</span>!&#x27;</span>)</span><br><span class="line"></span><br><span class="line">&gt;<span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">   hello()</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;$ python click_demo.py</span><br><span class="line"></span><br><span class="line">&gt;请输入名字: lzjun</span><br><span class="line">&gt;Hello lzjun!</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="help说明"><a href="#help说明" class="headerlink" title="help说明"></a>help说明</h4><blockquote>
<p>help : 执行<code>python demo.py --help</code> , 得到</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Usage: demo.py [OPTIONS]</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  --name TEXT    your name</span><br><span class="line">  --age INTEGER  your age</span><br><span class="line">  --help         Show this message and exit.</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="改变命令行程序的执行"><a href="#改变命令行程序的执行" class="headerlink" title="改变命令行程序的执行"></a>改变命令行程序的执行</h2><ul>
<li>有些参数会改变命令行程序的执行，比如在终端输入 <code>python</code> 是进入 python 控制台，而输入 <code>python --version</code> 是打印 python 版本。</li>
<li>Click 提供 eager 标识对参数名进行标识，<strong>如果输入该参数，则会拦截既定的命令行执行流程，跳转去执行一个回调函数</strong>。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> click</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_version</span>(<span class="params">ctx, param, value</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> value <span class="keyword">or</span> ctx.resilient_parsing:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    click.echo(<span class="string">&#x27;Version 1.0&#x27;</span>)</span><br><span class="line">    ctx.exit()</span><br><span class="line"></span><br><span class="line"><span class="meta">@click.command()</span></span><br><span class="line"><span class="meta">@click.option(<span class="params"><span class="string">&#x27;--version&#x27;</span>, is_flag=<span class="literal">True</span>, callback=print_version,</span></span></span><br><span class="line"><span class="params"><span class="meta">              expose_value=<span class="literal">False</span>, is_eager=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="meta">@click.option(<span class="params"><span class="string">&#x27;--name&#x27;</span>, default=<span class="string">&#x27;Ethan&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;name&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span>(<span class="params">name</span>):</span></span><br><span class="line">    click.echo(<span class="string">&#x27;Hello %s!&#x27;</span> % name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    hello()</span><br></pre></td></tr></table></figure>

<ul>
<li><code>is_eager=True</code> 表明该命令行选项优先级高于其他选项；</li>
<li><code>expose_value=False</code> 表示如果没有输入该命令行选项，会执行既定的命令行流程(也就是放弃此选项)；</li>
<li><code>callback</code> 指定了输入该命令行选项时，要跳转执行的函数；</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ python click_eager.py</span><br><span class="line">Hello Ethan!</span><br><span class="line"></span><br><span class="line">$ python click_eager.py --version                   # 拦截既定的命令行执行流程</span><br><span class="line">Version 1.0</span><br><span class="line"></span><br><span class="line">$ python click_eager.py --name Michael</span><br><span class="line">Hello Michael!</span><br><span class="line"></span><br><span class="line">$ python click_eager.py --version --name Ethan      # 忽略 name 选项</span><br><span class="line">Version 1.0</span><br></pre></td></tr></table></figure>



<h2 id="click-argument"><a href="#click-argument" class="headerlink" title="click.argument"></a>click.argument</h2><ul>
<li>使用 <code>@click.option</code> 来添加<strong>可选参数</strong>，</li>
<li>使用 <code>@click.argument</code> 来添加<strong>固定参数</strong>。</li>
<li><code>@click.argument</code> `的使用和 option 类似，但支持的功能比 option 少。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> click</span><br><span class="line"></span><br><span class="line"><span class="meta">@click.command()</span></span><br><span class="line"><span class="meta">@click.argument(<span class="params"><span class="string">&#x27;coordinates&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span>(<span class="params">coordinates</span>):</span></span><br><span class="line">    click.echo(<span class="string">&#x27;coordinates: %s&#x27;</span> % coordinates)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    show()</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ python click_argument.py --coordinates 10    # 错误用法，这是 option 参数的用法</span><br><span class="line">Error: no such option: --coordinates</span><br><span class="line"></span><br><span class="line">$ python click_argument.py 10                  # 正确，直接输入值即可</span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> click</span><br><span class="line"></span><br><span class="line"><span class="meta">@click.command()</span></span><br><span class="line"><span class="meta">@click.argument(<span class="params"><span class="string">&#x27;x&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">@click.argument(<span class="params"><span class="string">&#x27;y&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">@click.argument(<span class="params"><span class="string">&#x27;z&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span>(<span class="params">x, y, z</span>):</span></span><br><span class="line">    click.echo(<span class="string">&#x27;x: %s, y: %s, z:%s&#x27;</span> % (x, y, z))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    show()</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ python click_argument.py 10 20 30</span><br><span class="line">x: 10, y: 20, z:30</span><br></pre></td></tr></table></figure>



<h2 id="不定参数"><a href="#不定参数" class="headerlink" title="不定参数"></a>不定参数</h2><p>argument 还有另外一种常见的用法，就是接收不定量的参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> click</span><br><span class="line"></span><br><span class="line"><span class="meta">@click.command()</span></span><br><span class="line"><span class="meta">@click.argument(<span class="params"><span class="string">&#x27;src&#x27;</span>, nargs=-<span class="number">1</span></span>)</span></span><br><span class="line"><span class="meta">@click.argument(<span class="params"><span class="string">&#x27;dst&#x27;</span>, nargs=<span class="number">1</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">move</span>(<span class="params">src, dst</span>):</span></span><br><span class="line">    click.echo(<span class="string">&#x27;move %s to %s&#x27;</span> % (src, dst))</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    move()</span><br></pre></td></tr></table></figure>

<ul>
<li><code>nargs=-1</code> 表明参数 <code>src</code> 接收不定量的参数值，参数值会以 tuple 的形式传入函数。</li>
<li>如果 <code>nargs</code> 大于等于 1，表示接收 <code>nargs</code> 个参数值，上面的例子中，<code>dst</code> 接收一个参数值。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ python click_argument.py file1 trash    # src=(&#x27;file1&#x27;,)  dst=&#x27;trash&#x27;</span><br><span class="line">move (u&#x27;file1&#x27;,) to trash</span><br><span class="line"></span><br><span class="line">$ python click_argument.py file1 file2 file3 trash   # src=(&#x27;file1&#x27;, &#x27;file2&#x27;, &#x27;file3&#x27;)  dst=&#x27;trash&#x27;</span><br><span class="line">move (u&#x27;file1&#x27;, u&#x27;file2&#x27;, u&#x27;file3&#x27;) to trash</span><br></pre></td></tr></table></figure>



<h2 id="Group"><a href="#Group" class="headerlink" title="Group"></a>Group</h2><p>Click 通过 group 来创建一个命令行组，也就是说它可以有各种参数来解决相同类别的不同问题</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> click</span><br><span class="line"></span><br><span class="line"><span class="meta">@click.group()</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cli</span>():</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@click.command()</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">initdb</span>():</span></span><br><span class="line">    click.echo(<span class="string">&#x27;Initialized the database&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@click.command()</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dropdb</span>():</span></span><br><span class="line">    click.echo(<span class="string">&#x27;Droped the database&#x27;</span>)</span><br><span class="line"></span><br><span class="line">cli.add_command(initdb)</span><br><span class="line">cli.add_command(dropdb)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    cli()</span><br></pre></td></tr></table></figure>

<p>执行情况</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ python hello.py</span><br><span class="line">Usage: hello.py [OPTIONS] COMMAND [ARGS]...</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  --help  Show this message and exit.</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  dropdb</span><br><span class="line">  initdb</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ python hello.py initdb</span><br><span class="line">Initialized the database</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ python hello.py dropdb</span><br><span class="line">Droped the database</span><br></pre></td></tr></table></figure>











</div></div></article><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>