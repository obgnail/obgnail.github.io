<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=" id=&quot;地址&quot;&gt;&lt;a href=&quot;#地址&quot; class=&quot;headerlink&quot; title=&quot;地址&quot;&gt;&lt;/a&gt;地址&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://www.bilibili.com/video/av51826103&quot;&gt;软件测试-Postman接口测试实战从入门到精通&lt;/a&gt;"><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><title>Postman教程 | 凉薄的自动书记人偶</title><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Hexo 5.4.0"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Tags</a><a class="sidebar-nav-item" href="/About">About</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Postman/" rel="tag">Postman</a></div><div class="post-time">2021-07-07</div></div></div><div class="container post-header"><h1>Postman教程</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80"><span class="toc-number">1.</span> <span class="toc-text">地址</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E4%BD%93%E4%B8%8E-Content-Type%E5%A4%B4%E5%9F%9F"><span class="toc-number">2.</span> <span class="toc-text">请求体与 Content-Type头域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#post%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">post上传文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">4.</span> <span class="toc-text">环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%B2%99%E7%AE%B1"><span class="toc-number">5.</span> <span class="toc-text">测试沙箱</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E8%81%94%E6%8E%A5%E5%8F%A3%E7%9A%84%E6%B5%8B%E8%AF%95"><span class="toc-number">6.</span> <span class="toc-text">关联接口的测试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E9%9B%86"><span class="toc-number">7.</span> <span class="toc-text">测试集</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Cookie"><span class="toc-number">8.</span> <span class="toc-text">使用 Cookie</span></a></li></ol></details></div><div class="container post-content"><h2 id="地址"><a href="#地址" class="headerlink" title="地址"></a>地址</h2><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/av51826103">软件测试-Postman接口测试实战从入门到精通</a></p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/av40714496">软件测试之接口测试工具postman</a></p>
<h2 id="请求体与-Content-Type头域"><a href="#请求体与-Content-Type头域" class="headerlink" title="请求体与 Content-Type头域"></a>请求体与 Content-Type头域</h2><ul>
<li>x-www-form-urlencode对应于 Content-Type头域为x-www-form-urlencoded的类型，是以键值对形式发送的表单参数，同时<strong>参数会携带在ur中</strong></li>
<li>form-data对应于 Content-Type的 multipart/form-data类型，既可以发送键值对也可以进行文件参数传递</li>
<li>raw选项中可以使用请求体原始格式编辑各 Content-Type 类型对应的参数格式，直接按请求体的格式来进行内容发送</li>
<li>binary选项用于发送文件内容请求。</li>
</ul>
<h2 id="post上传文件"><a href="#post上传文件" class="headerlink" title="post上传文件"></a>post上传文件</h2><p>KEY不仅仅是Text , 还可以是File</p>
<p><img src="/images/1583822266920.png" alt="1583822266920"></p>
<h2 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h2><p>添加环境变量</p>
<p><img src="/images/1583829037425.png" alt="1583829037425"></p>
<p>之后就可以使用<code>&#123;&#123; my_var_name &#125;&#125;</code>了</p>
<h2 id="测试沙箱"><a href="#测试沙箱" class="headerlink" title="测试沙箱"></a>测试沙箱</h2><p>测试沙箱常用功能:</p>
<p>Postman测试沙箱其实是结合JS脚本完成测试中的功能，在请求发起前后实现部分测试操作。</p>
<p>常用功能 :</p>
<ol>
<li><code>pre-request scripts</code> : 请求前脚本（pre-request scripts）设置请求前置操作如设置变量等。</li>
<li><code>tests</code> : 请求后对状态码、响应头、响应正文等信息进行断言操作。</li>
</ol>
<blockquote>
<p>简单来说 , <code>pre-request scripts</code> 和 <code>tests</code> 就是请求前和请求后的钩子 , 用于预处理和请求后对响应的测试</p>
</blockquote>
<p>使用JS代码编写即可</p>
<p><img src="/images/1583829593474.png" alt="1583829593474"></p>
<p><img src="/images/1583829736874.png" alt="1583829736874"></p>
<p>断言最检测的部分:</p>
<ol>
<li>请求头</li>
<li>请求体</li>
<li>状态码</li>
<li>响应时间</li>
</ol>
<p><code>pm.response</code> : 表示请求的返回对象. 对应:</p>
<ol>
<li> 响应状态码 : <code>pm.response.code</code></li>
<li>响应消息头 : <code>pm.response.headers</code></li>
<li>响应时间 : <code>pm.response.responseTime</code></li>
<li>响应数据 : <code>pm response.text()</code></li>
<li>响应数据json格式 : <code>pm.response.json()</code></li>
</ol>
<blockquote>
<p>eg:</p>
<p>Pre-request script:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uuid</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> s = [];</span><br><span class="line">    <span class="keyword">var</span> hexDigits = <span class="string">&quot;0123456789abcdef&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">36</span>; i++) &#123;</span><br><span class="line">        s[i] = hexDigits.substr(<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">0x10</span>), <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    s[<span class="number">14</span>] = <span class="string">&quot;4&quot;</span>;</span><br><span class="line">    s[<span class="number">19</span>] = hexDigits.substr((s[<span class="number">19</span>] &amp; <span class="number">0x3</span>) | <span class="number">0x8</span>, <span class="number">1</span>);</span><br><span class="line">    s[<span class="number">8</span>] = s[<span class="number">13</span>] = s[<span class="number">18</span>] = s[<span class="number">23</span>] = <span class="string">&quot;-&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> uuid = s.join(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> uuid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">random_uuid = uuid().slice(<span class="number">0</span>,<span class="number">8</span>)</span><br><span class="line">pm.environment.set(<span class="string">&quot;random_uuid&quot;</span>, random_uuid)</span><br></pre></td></tr></table></figure>

<p>Tests:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">api_url = pm.variables.get(<span class="string">&quot;api_url&quot;</span>);</span><br><span class="line">team_uuid = pm.variables.get(<span class="string">&quot;team_uuid&quot;</span>);</span><br><span class="line">user_uuid = pm.variables.get(<span class="string">&quot;user_uuid&quot;</span>);</span><br><span class="line">user_token = pm.variables.get(<span class="string">&quot;user_token&quot;</span>);</span><br><span class="line"></span><br><span class="line">url = <span class="string">`<span class="subst">$&#123;api_url&#125;</span>/team/<span class="subst">$&#123;team_uuid&#125;</span>/project/Pqmud3zhMshoBOOV/stamps/data`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> loginRequest = &#123;</span><br><span class="line">    <span class="attr">url</span>: url,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span>,</span><br><span class="line">    <span class="attr">header</span>: &#123;</span><br><span class="line">        <span class="string">&quot;Ones-User-ID&quot;</span>: user_uuid,</span><br><span class="line">        <span class="string">&quot;Ones-Auth-Token&quot;</span>: user_token,</span><br><span class="line">        <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">body</span>: &#123;</span><br><span class="line">        <span class="attr">mode</span>: <span class="string">&#x27;row&#x27;</span>,</span><br><span class="line">        <span class="attr">raw</span>: <span class="built_in">JSON</span>.stringify(&#123; <span class="attr">sprint</span>: <span class="number">0</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">pm.sendRequest(loginRequest, <span class="function"><span class="keyword">function</span> (<span class="params">err, res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err ? err : res.text());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// example:</span></span><br><span class="line"><span class="comment">// https://gist.github.com/madebysid/b57985b0649d3407a7aa9de1bd327990</span></span><br></pre></td></tr></table></figure>

<p>Body:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;tasks&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;uuid&quot;</span>: <span class="string">&quot;Pqmud3zh&#123;&#123;random_uuid&#125;&#125;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;owner&quot;</span>: <span class="string">&quot;Pqmud3zh&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;assign&quot;</span>: <span class="string">&quot;Pqmud3zh&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;summary&quot;</span>: <span class="string">&quot;qwe&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;parent_uuid&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;field_values&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;field_uuid&quot;</span>: <span class="string">&quot;field004&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;type&quot;</span>: <span class="number">8</span>,</span><br><span class="line">                    <span class="attr">&quot;value&quot;</span>: <span class="string">&quot;Pqmud3zh&quot;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;field_uuid&quot;</span>: <span class="string">&quot;field012&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;type&quot;</span>: <span class="number">1</span>,</span><br><span class="line">                    <span class="attr">&quot;value&quot;</span>: <span class="string">&quot;EDjvSU7Q&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">&quot;project_uuid&quot;</span>: <span class="string">&quot;HXeVwFj91dtKjTNM&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;issue_type_uuid&quot;</span>: <span class="string">&quot;GwNxpqQh&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;add_manhours&quot;</span>: [],</span><br><span class="line">            <span class="attr">&quot;watchers&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;Pqmud3zh&quot;</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="关联接口的测试"><a href="#关联接口的测试" class="headerlink" title="关联接口的测试"></a>关联接口的测试</h2><ol>
<li>从接口的响应结果当中提取需要的数据</li>
<li>设置成环境变量/全局变量</li>
<li>写入到下—个接口的请求数据中</li>
</ol>
<blockquote>
<p>所以 , 最经常做的就是</p>
<p>在第一个请求的 <code>tests</code>里获取响应的token , 然后将这个token设置成环境变量 , 用这个环境变量去做下一个请求</p>
</blockquote>
<h2 id="测试集"><a href="#测试集" class="headerlink" title="测试集"></a>测试集</h2><p>测试集为了更方便地管理接口请求的执行，可以通过 postman测试集（collection）来完成测试的操作，每一个测试请求可以看成一个测试用例（testcase），collections能够—次管理多个测试用例来执行。通过save，能够将请求保存到 collections中使用</p>
<p>点击<code>RUN</code>即可</p>
<p><img src="/images/1583830624298.png" alt="1583830624298"></p>
<h2 id="使用-Cookie"><a href="#使用-Cookie" class="headerlink" title="使用 Cookie"></a>使用 Cookie</h2><ol>
<li>直接在头域中添加 cookie头域，适用于已知请求时的 cookie 头域的情况</li>
<li>使用 Postman的 cookie管理机制，既可以手动添加，同时 Postman也会将操作流程中获取的参数自动保存，因此可以通过调用前置接口来完成 cookie获取。</li>
</ol>
<p><img src="/images/1583831431500.png" alt="1583831431500"></p>
<p><img src="/images/1583831450987.png" alt="1583831450987"></p>
<p>Postman最牛逼的就是<strong>他能自动记录网站的set-cookies , 并且在下一次访问的时候自动携带这个cookies</strong></p>
</div></div></article><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>