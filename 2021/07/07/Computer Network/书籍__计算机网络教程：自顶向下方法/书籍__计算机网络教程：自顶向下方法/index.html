<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=" id=&quot;第一章-概论&quot;&gt;&lt;a href=&quot;#第一章-概论&quot; class=&quot;headerlink&quot; title=&quot;第一章 概论&quot;&gt;&lt;/a&gt;第一章 概论&lt;/h1&gt;&lt;p&gt;过去和现在的局域网的拓扑结构："><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><title>计算机网络教程：自顶向下方法 | 凉薄的自动书记人偶</title><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Hexo 5.4.0"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-none-link" href="/tags/Computer-Network/" rel="tag">Computer Network</a></div><div class="post-time">2021-07-07</div></div></div><div class="container post-header"><h1>计算机网络教程：自顶向下方法</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%AE%BA"><span class="toc-number">1.</span> <span class="toc-text">第一章 概论</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">2.</span> <span class="toc-text">第二章 应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#FTP"><span class="toc-number">2.1.</span> <span class="toc-text">FTP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Email"><span class="toc-number">2.2.</span> <span class="toc-text">Email</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TELNET"><span class="toc-number">2.3.</span> <span class="toc-text">TELNET</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E8%99%9A%E6%8B%9F%E7%BB%88%E7%AB%AF-NVT"><span class="toc-number">2.4.</span> <span class="toc-text">网络虚拟终端(NVT)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SSH"><span class="toc-number">2.5.</span> <span class="toc-text">SSH</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DNS"><span class="toc-number">2.6.</span> <span class="toc-text">DNS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8D%E5%AD%97%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84"><span class="toc-number">2.6.1.</span> <span class="toc-text">名字服务器的层次结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%92%E5%BD%92%E8%A7%A3%E6%9E%90"><span class="toc-number">2.6.2.</span> <span class="toc-text">递归解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B5%84%E6%BA%90%E8%AE%B0%E5%BD%95"><span class="toc-number">2.6.3.</span> <span class="toc-text">资源记录</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#P2P%E7%BD%91%E7%BB%9C"><span class="toc-number">2.7.</span> <span class="toc-text">P2P网络</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E4%B8%AD%E5%BC%8F%E7%BD%91%E7%BB%9C"><span class="toc-number">2.7.1.</span> <span class="toc-text">集中式网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%95%A3%E5%BC%8F%E7%BD%91%E7%BB%9C"><span class="toc-number">2.7.2.</span> <span class="toc-text">分散式网络</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="toc-number">3.</span> <span class="toc-text">第三章 传输层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">3.1.</span> <span class="toc-text">传输层流量控制</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%B3%E8%BF%87%E4%BA%8684-114"><span class="toc-number">4.</span> <span class="toc-text">跳过了84-114</span></a></li></ol></details></div><div class="container post-content"><h1 id="第一章-概论"><a href="#第一章-概论" class="headerlink" title="第一章 概论"></a>第一章 概论</h1><p>过去和现在的局域网的拓扑结构：</p>
<p><img src="/images/image-20210621105958040.png" alt="image-20210621105958040"></p>
<p>局域网互联：</p>
<p><img src="/images/image-20210621110241766.png" alt="image-20210621110241766"></p>
<p>简单复习：</p>
<p><img src="/images/image-20210621113348100.png" alt="image-20210621113348100"></p>
<p>各层的作用：</p>
<ol>
<li>**应用层(application layer)**：直接为用户的应用进程提供服务。</li>
<li><strong>运输层(transport layer)<strong>：负责向两个主机中进程之间的</strong>通信提供服务</strong>。</li>
<li>**网络层(network layer)**主要包括以下两个任务：<ol>
<li>负责为分组交换网上的不同主机提供通信服务。</li>
<li>选中合适的路由，使源主机运输层所传下来的分组，能够通过网络中的路由器找到目的主机。</li>
</ol>
</li>
<li>**链路层(data link layer)**：在两个相邻结点之间传送数据时，数据链路层将网络层交下来的IP数据报组装成帧(framing)，在两个相邻结点之间的链路上“透明”地传送帧中的数据。</li>
<li>**物理层(physical layer)**：物理层的任务就是透明地传送比特流。</li>
</ol>
<h1 id="第二章-应用层"><a href="#第二章-应用层" class="headerlink" title="第二章 应用层"></a>第二章 应用层</h1><h2 id="FTP"><a href="#FTP" class="headerlink" title="FTP"></a>FTP</h2><p>FTP基本模型：</p>
<p><img src="/images/image-20210621123401080.png" alt="image-20210621123401080"></p>
<p>客户有三个组件</p>
<ul>
<li>用户接口</li>
<li>用户控制进程</li>
<li>客户数据传输进程</li>
</ul>
<p>服务器有两个组件：</p>
<ul>
<li>服务器控制进程</li>
<li>服务器数据传输进程</li>
</ul>
<blockquote>
<p>控制链接是在控制进程之间进行的，数据链接是在数据传输进程之间进行的</p>
</blockquote>
<ul>
<li>在整个交互的FTP会话期间，控制链接始终处于链接状态。数据链接则在每次传输文件时开启，当文具店传输完毕时，链接关闭。如果传输多个文件那么数据链接可以打开和关闭多次，</li>
<li>FTP使用两个端口：<ul>
<li>21用于控制连接</li>
<li>20用户数据连接</li>
</ul>
</li>
</ul>
<p>FTP流程如下：</p>
<p><img src="/images/image-20210621163509046.png" alt="image-20210621163509046"></p>
<h2 id="Email"><a href="#Email" class="headerlink" title="Email"></a>Email</h2><p>传输一个邮件共有三个阶段：建立连接，邮件传输，终止连接。</p>
<ol>
<li>建立连接<ul>
<li>在客户创建了端口25到TCP连接后，SMTP服务器开始连接阶段。这个阶段涉及三个步骤<ol>
<li>服务器发送代码220（服务就绪）告知客户他准备好接受邮件。如果服务器没有就绪，他发送代码421（服务不可用）。</li>
<li>客户发送安HELO报文使用自身域名地址来识别自身。</li>
<li>服务器以代码250（请求命令完成）响应，或者其他依情况而定的代码。</li>
</ol>
</li>
</ul>
</li>
<li>邮件传输<ul>
<li>在SMTP客户的服务器的连接建立后，当个报文可以在一个发信人和多个收信人之间交换。这一阶段涉及八个步骤。如果有一个以上收信人，那么重复第三步和第四步<ol>
<li>客户发送MAIL FROM报文以介绍发信人，它包括发信人的邮件地址。在这一步必须先发信人提供回信地址，回信地址用来返回错误已经报告报文。</li>
<li>服务器用代码250或者其他适当的代码进行响应。</li>
<li>客户发送RCPT TO（收信人）报文，包含了收信人的邮箱地址。</li>
<li>服务器用代码250或者其他适当的代码进行响应。</li>
<li>客户发送DATA报文初始化报文传输。</li>
<li>服务器用代码354（开始邮件输入）或其他适当的代码响应。</li>
<li>客户以连续行的形式发送报文内容，每行用两行结束标记（回车和换行）终止。报文用一个字包含句点的行终止。</li>
</ol>
</li>
</ul>
</li>
<li>终止连接<ul>
<li>阶段涉及两个步骤<ol>
<li>客户发送QUIT命令</li>
<li>服务器用代码221或其他适当的代码进行响应。</li>
</ol>
</li>
</ul>
</li>
</ol>
<p><img src="/images/image-20210621171226414.png" alt="image-20210621171226414"></p>
<h2 id="TELNET"><a href="#TELNET" class="headerlink" title="TELNET"></a>TELNET</h2><p><img src="/images/image-20210706183846041.png" alt="image-20210706183846041"></p>
<h2 id="网络虚拟终端-NVT"><a href="#网络虚拟终端-NVT" class="headerlink" title="网络虚拟终端(NVT)"></a>网络虚拟终端(NVT)</h2><ul>
<li>访问一个远程计算机的机制是复杂的，这是i因为每个计算机以及其操作系统都接受一种特殊的字符组合作为一个标记，例如在运行DOS操作系统的计算机中，文件结束标志是ctrl+Z，但是在Unix操作系统中则是ctrl+D</li>
<li>我们现在是和异构系统打交道，如果我们想要访问任意一台计算机，那么我们必须要知道将要连接的计算机是什么类型，TELNET解决这个问题的方法是定一个通用的接口，称为<code>网络虚拟终端</code>字符集。</li>
<li>通过这个接口，客户TELNET将来自本地终端的字符(数据或命令)转换成NVT形式，然后传递给网络。而服务器TELNET 将来自NVT形式的数据或命令转换成远程计算机可接受的形式。</li>
</ul>
<p><img src="/images/image-20210706191241149.png" alt="image-20210706191241149"></p>
<p>NVT使用两个字符集：一个是数据字符，另一个是控制字符。都是8位的字符集。</p>
<h2 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h2><p>SSH是一个有三个组件的应用层协议。</p>
<p><img src="/images/image-20210706191434063.png" alt="image-20210706191434063"></p>
<ul>
<li><p>SSH传输协议</p>
<p>由于TCP不是安全传输层协议，SSH首先使用在TCP定都创建安全链路的协议，称为<code>SSH-TRANS</code>。当执行这个协议的程序，客户和服务器首先使用TCP协议建立一个不安全的连接。然后他们交换几个安全参数在TCP顶部建立安全信道。这里将要列出这个协议提供的服务</p>
<ul>
<li>隐私或交换报文的保密性。</li>
<li>数据完整性，这意味着客户和服务器交换的报文不会被入侵者改变。</li>
<li>服务认证，这意味着客户现在确认服务器正式其所声称的那台服务器。</li>
<li>报文压缩，提高了系统的效率比并且使得进攻更难。</li>
</ul>
</li>
<li><p>SSH认证协议</p>
</li>
<li><p>SSH连接协议</p>
</li>
</ul>
<h2 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h2><p>DNS的流程：</p>
<p><img src="/images/image-20210707122543501.png" alt="image-20210707122543501"></p>
<h3 id="名字服务器的层次结构"><a href="#名字服务器的层次结构" class="headerlink" title="名字服务器的层次结构"></a>名字服务器的层次结构</h3><p><img src="/images/image-20210707123016018.png" alt="image-20210707123016018"></p>
<h3 id="递归解析"><a href="#递归解析" class="headerlink" title="递归解析"></a>递归解析</h3><p>从some.anet.com发送数据到enginerring.mcgraw-ghill.com：</p>
<p><img src="/images/image-20210707144633267.png" alt="image-20210707144633267"></p>
<h3 id="资源记录"><a href="#资源记录" class="headerlink" title="资源记录"></a>资源记录</h3><p>与某个服务器相关的区域信息以<code>资源记录</code>集的形式实现。换言之，域名服务器存储了资源记录的数据库。资源记录是一个5元组结构：<code>(域名,类型,类别,TTL,数值)</code></p>
<ul>
<li>域名：标志资源记录</li>
<li>数值：定义了保存的关于域名的信息。</li>
<li>TTL：定义了信息有效的时间。以秒为单位</li>
<li>类别：定义了网络的类型，</li>
<li>类型：定义了数值应当如何被解释。</li>
</ul>
<table>
<thead>
<tr>
<th>类型</th>
<th>数值的解释</th>
</tr>
</thead>
<tbody><tr>
<td>A</td>
<td>一个32位IPv4地址</td>
</tr>
<tr>
<td>NS</td>
<td>标志区域的授权服务器</td>
</tr>
<tr>
<td>CNAME</td>
<td>为主机的官方名称定一个别名</td>
</tr>
<tr>
<td>SOA</td>
<td>标记区域的开始</td>
</tr>
<tr>
<td>MX</td>
<td>转寄邮件到邮件服务器</td>
</tr>
<tr>
<td>AAAA</td>
<td>一个IPv4地址</td>
</tr>
</tbody></table>
<h2 id="P2P网络"><a href="#P2P网络" class="headerlink" title="P2P网络"></a>P2P网络</h2><p>P2P网络分成两类：集中式和分散式</p>
<h3 id="集中式网络"><a href="#集中式网络" class="headerlink" title="集中式网络"></a>集中式网络</h3><ul>
<li>目录系统：列出对等节点及他们所提供的内容。</li>
<li>一个寻找特定文件的对等节点向中心服务器发送一个查询，服务器搜索其目录，见含有所需要文件副本的多个结点的IP地址作为响应返回对等节点，对等节点与其中一个节点连接并下载文件。当有节点加入或离开时，目录立即进行更新。</li>
<li>集中式网络对目录的维护做得很简单，但是这又很多缺点，访问目录可能产生巨大的流量并减慢系统。中心服务器容易受到功能并且如果中心服务器全都失效，那么整个个系统就会瘫痪。</li>
</ul>
<p><img src="/images/image-20210707150811584.png" alt="image-20210707150811584"></p>
<h3 id="分散式网络"><a href="#分散式网络" class="headerlink" title="分散式网络"></a>分散式网络</h3><ul>
<li>分散式网络并不依赖中心化目录系统。</li>
<li>对等节点将自身置于覆盖网(overlay network)中。覆盖网一个逻辑网络，在物理网络的顶层创建，依照覆盖网中节点连接方式。</li>
<li>分散式网络分为结构化和非结构化两种。<ul>
<li>非结构化网络：节点随机连接。所以搜索效率不高，因为对一个文件的查询必须通过网络进行泛洪，着早晨了极大的通信量，而且查询可能仍未解决。</li>
<li>结构化网络采用一组预先确定的规则来连接节点，有效并高效的解决查询。最常使用的技术式分布式散列表。</li>
</ul>
</li>
</ul>
<h1 id="第三章-传输层"><a href="#第三章-传输层" class="headerlink" title="第三章 传输层"></a>第三章 传输层</h1><p>传输层的首要任务是：提供进程间通信。</p>
<h2 id="传输层流量控制"><a href="#传输层流量控制" class="headerlink" title="传输层流量控制"></a>传输层流量控制</h2><ul>
<li>应用层的发送方进程仅仅是一个生产者。他生产报文块，并吧他们推到传输层。</li>
<li>发送方传输层既是消费者也是生产者，他消费生产者推来的报文，将报文封装进分组并传递到接收方传输层。</li>
<li>接收方传输层既是消费者也是生产者，消费从发送方那里接收来的分组，解封装报文并传递到应用层。然而，最后的传递通常是拉传递；传输层等待直到应用层进程请求报文。</li>
<li>所以我们至少需要两种流量控制：<ul>
<li>从发送方传输层到发送方应用层的流量控制</li>
<li>从接收方传输层到发送方传输层的流量控制</li>
</ul>
</li>
<li>所以发送方传输层和接收方传输层都有<code>缓冲区</code>，用于存储分组。当缓冲区已满，就通知停止传输报文块，当有空闲位置的时，就通知应用层可以再次传输报文块。</li>
</ul>
<p><img src="/images/image-20210707153903347.png" alt="image-20210707153903347"></p>
<h1 id="跳过了84-114"><a href="#跳过了84-114" class="headerlink" title="跳过了84-114"></a>跳过了84-114</h1></div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>