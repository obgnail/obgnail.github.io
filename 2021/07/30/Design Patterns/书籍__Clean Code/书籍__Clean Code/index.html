<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=" id=&quot;第二章-有意义的命名&quot;&gt;&lt;a href=&quot;#第二章-有意义的命名&quot; class=&quot;headerlink&quot; title=&quot;第二章 有意义的命名&quot;&gt;&lt;/a&gt;第二章 有意义的命名&lt;/h2&gt;&lt;h3 id=&quot;避免误导&quot;&gt;&lt;a href=&quot;#避免误导&quot; class=&quot;headerlink&quot; title=&quot;避免误导&quot;&gt;&lt;/a&gt;避免误导&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;别使用accountList来指代一组账号，就算他真的是List类型也不要使用List作为变量名。"><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><title>Clean Code | 凉薄的自动书记人偶</title><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Hexo 5.4.0"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Tags</a><a class="sidebar-nav-item" href="/About">About</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Design-Patterns/" rel="tag">Design Patterns</a></div><div class="post-time">2021-07-30</div></div></div><div class="container post-header"><h1>Clean Code</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E6%9C%89%E6%84%8F%E4%B9%89%E7%9A%84%E5%91%BD%E5%90%8D"><span class="toc-number">1.</span> <span class="toc-text">第二章 有意义的命名</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E8%AF%AF%E5%AF%BC"><span class="toc-number">1.1.</span> <span class="toc-text">避免误导</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%89%E6%84%8F%E4%B9%89%E7%9A%84%E5%8C%BA%E5%88%86"><span class="toc-number">1.2.</span> <span class="toc-text">有意义的区分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%BB%E4%BD%95%E6%83%85%E5%86%B5%E4%B8%8B%E9%83%BD%E8%A6%81%E9%81%BF%E5%85%8D%E4%BD%BF%E7%94%A8%E5%B9%BB%E6%95%B0"><span class="toc-number">1.3.</span> <span class="toc-text">任何情况下都要避免使用幻数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E5%90%8D%E5%B0%BD%E9%87%8F%E4%BD%BF%E7%94%A8%E5%8A%A8%E8%AF%8D"><span class="toc-number">1.4.</span> <span class="toc-text">方法名尽量使用动词</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E8%A6%81%E4%BD%BF%E7%94%A8%E5%90%8C%E4%B9%89%E8%AF%8D"><span class="toc-number">1.5.</span> <span class="toc-text">不要使用同义词</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%89%8D%E7%BC%80%E6%8F%90%E4%BE%9B%E8%AF%AD%E5%A2%83"><span class="toc-number">1.6.</span> <span class="toc-text">使用前缀提供语境</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-%E5%87%BD%E6%95%B0"><span class="toc-number">2.</span> <span class="toc-text">第三章 函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%AD%E5%B0%8F"><span class="toc-number">2.1.</span> <span class="toc-text">短小</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AA%E5%81%9A%E4%B8%80%E4%BB%B6%E4%BA%8B"><span class="toc-number">2.2.</span> <span class="toc-text">只做一件事</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E4%BD%93%E5%90%8C%E6%A0%B7%E7%9A%84%E6%8A%BD%E8%B1%A1%E5%B1%82%E7%BA%A7"><span class="toc-number">2.3.</span> <span class="toc-text">函数体同样的抽象层级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%BF%87%E6%8F%8F%E8%BF%B0%E6%80%A7%E7%9A%84%E5%87%BD%E6%95%B0%E5%90%8D"><span class="toc-number">2.4.</span> <span class="toc-text">使用过描述性的函数名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E8%B6%8A%E5%B0%91%E8%B6%8A%E5%A5%BD"><span class="toc-number">2.5.</span> <span class="toc-text">函数参数越少越好</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A0%E5%89%AF%E4%BD%9C%E7%94%A8"><span class="toc-number">2.6.</span> <span class="toc-text">无副作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%88%E6%83%B3%E4%BB%80%E4%B9%88%E5%B0%B1%E5%86%99%E4%BB%80%E4%B9%88%EF%BC%8C%E7%84%B6%E5%90%8E%E5%86%8D%E6%89%93%E7%A3%A8"><span class="toc-number">2.7.</span> <span class="toc-text">先想什么就写什么，然后再打磨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E6%B3%A8%E9%87%8A"><span class="toc-number">3.</span> <span class="toc-text">第四章 注释</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%BD%E9%87%8F%E5%86%99%E4%B8%BA%E4%BB%80%E4%B9%88"><span class="toc-number">3.1.</span> <span class="toc-text">尽量写为什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E8%A6%81%E6%B3%A8%E9%87%8A%E5%BA%9F%E5%BC%83%E4%BB%A3%E7%A0%81"><span class="toc-number">3.2.</span> <span class="toc-text">不要注释废弃代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A1%AE%E4%BF%9D%E6%B3%A8%E9%87%8A%E6%8F%8F%E8%BF%B0%E4%BA%86%E7%A6%BB%E4%BB%96%E6%9C%80%E8%BF%91%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-number">3.3.</span> <span class="toc-text">确保注释描述了离他最近的代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.</span> <span class="toc-text">第五章 格式</span></a></li></ol></details></div><div class="container post-content"><h2 id="第二章-有意义的命名"><a href="#第二章-有意义的命名" class="headerlink" title="第二章 有意义的命名"></a>第二章 有意义的命名</h2><h3 id="避免误导"><a href="#避免误导" class="headerlink" title="避免误导"></a>避免误导</h3><ul>
<li><p>别使用accountList来指代一组账号，就算他真的是List类型也不要使用List作为变量名。</p>
<p>List是一个容器类型名，容易引起错误的判断。所以accountGroup或bunchOfAccounts，甚至直接使用accounts都会好一些。</p>
</li>
<li><p>命名很长的时候，避免相似。</p>
</li>
</ul>
<h3 id="有意义的区分"><a href="#有意义的区分" class="headerlink" title="有意义的区分"></a>有意义的区分</h3><ul>
<li><p>不要为了不重名而给变量添加无意义的字词。</p>
<p>比如：<code>product</code>，<code>productInfo</code>，<code>ProductData</code></p>
</li>
<li><p>使用易于搜索的名称。</p>
</li>
</ul>
<h3 id="任何情况下都要避免使用幻数"><a href="#任何情况下都要避免使用幻数" class="headerlink" title="任何情况下都要避免使用幻数"></a>任何情况下都要避免使用幻数</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetAbsPath</span><span class="params">(basePath, relPath <span class="keyword">string</span>)</span> <span class="params">(absPath <span class="keyword">string</span>, err error)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> strings.HasPrefix(relPath, <span class="string">&quot;./&quot;</span>) &#123;</span><br><span class="line">		<span class="keyword">return</span> GetAbsPath(basePath, relPath[<span class="number">2</span>:])</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">return</span> filepath.Join(basePath, relPath), <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>改成</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GetAbsPath</span><span class="params">(basePath, relPath <span class="keyword">string</span>)</span> <span class="params">(absPath <span class="keyword">string</span>, err error)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> strings.HasPrefix(relPath, <span class="string">&quot;./&quot;</span>) &#123;</span><br><span class="line"> relStringLen := <span class="number">2</span></span><br><span class="line"> removeRel := relPath[relStringLen:]</span><br><span class="line">		<span class="keyword">return</span> GetAbsPath(basePath, removeRel)</span><br><span class="line">	&#125;</span><br><span class="line"><span class="keyword">return</span> filepath.Join(basePath, relPath), <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="方法名尽量使用动词"><a href="#方法名尽量使用动词" class="headerlink" title="方法名尽量使用动词"></a>方法名尽量使用动词</h3><p>方法名尽量不要使用名称</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getName</span><span class="params">(n <span class="keyword">string</span>)</span></span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">nameGetter</span><span class="params">(n <span class="keyword">string</span>)</span></span> &#123;&#125;</span><br></pre></td></tr></table></figure>



<h3 id="不要使用同义词"><a href="#不要使用同义词" class="headerlink" title="不要使用同义词"></a>不要使用同义词</h3><p>比如：使用了<code>getName()</code>后，就不要使用<code>fetchName()</code></p>
<blockquote>
<p>insert和add的区别</p>
<ul>
<li>add：将两个值连接后，得到一个新的值。</li>
<li>insert：将一个值加入一个集合中。</li>
</ul>
</blockquote>
<h3 id="使用前缀提供语境"><a href="#使用前缀提供语境" class="headerlink" title="使用前缀提供语境"></a>使用前缀提供语境</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">addrFirstName = <span class="string">&#x27;1&#x27;</span></span><br><span class="line">addrLastName = <span class="string">&#x27;2&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过给firstName和lastName添加Addr前缀，提供语境，更好的知道是他们是 地址名</span></span><br><span class="line">fullAddrName = addrFirstName + addrLastName</span><br></pre></td></tr></table></figure>



<h2 id="第三章-函数"><a href="#第三章-函数" class="headerlink" title="第三章 函数"></a>第三章 函数</h2><h3 id="短小"><a href="#短小" class="headerlink" title="短小"></a>短小</h3><p>20行左右最佳</p>
<h3 id="只做一件事"><a href="#只做一件事" class="headerlink" title="只做一件事"></a>只做一件事</h3><p>判断函数是否不止做了一件事，就是看是否能再拆出一个函数，改函数不仅只是单纯的重新诠释其实现。</p>
<h3 id="函数体同样的抽象层级"><a href="#函数体同样的抽象层级" class="headerlink" title="函数体同样的抽象层级"></a>函数体同样的抽象层级</h3><p>要确保函数只做一件事，函数中的语句都要在同一抽象层级上。</p>
<p>比如一个函数里面有getHTML()位于较高抽巷层的概念，也有string pagePathName = PathParser.render(pagePath)等位于中间抽巷层级的概念，还有.append(“\n”)等位于相当低的抽象层的概念。</p>
<p>函数中混杂不同抽象层级，往往让人迷惑。读者可能无法判断某个表达式是基础概念还是细节。</p>
<blockquote>
<p>要让代码拥有自顶向下的阅读顺序，让每个函数后面都跟着位于下一抽象层级的函数。这样一来，在查看函数列表时，就能循着抽象层级向下阅读了。这叫做<code>向下规则</code></p>
</blockquote>
<h3 id="使用过描述性的函数名"><a href="#使用过描述性的函数名" class="headerlink" title="使用过描述性的函数名"></a>使用过描述性的函数名</h3><p>别害怕长函数名，长函数名比描述不清楚的短函数名要好太多。</p>
<h3 id="函数参数越少越好"><a href="#函数参数越少越好" class="headerlink" title="函数参数越少越好"></a>函数参数越少越好</h3><p>最好是没有参数</p>
<blockquote>
<p>例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">writeField(outputStream, name)</span><br></pre></td></tr></table></figure>

<p>就可以将writeField方法作为outputStream的成员方法，从而能这样使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">outputStream.writeField(name)</span><br></pre></td></tr></table></figure>
</blockquote>
<p>如果函数需要三个或三个以上的参数，就需要考虑封装为类了。</p>
<h3 id="无副作用"><a href="#无副作用" class="headerlink" title="无副作用"></a>无副作用</h3><h3 id="先想什么就写什么，然后再打磨"><a href="#先想什么就写什么，然后再打磨" class="headerlink" title="先想什么就写什么，然后再打磨"></a>先想什么就写什么，然后再打磨</h3><ul>
<li>一开始函数可以冗长而复杂。</li>
<li>然后配上一套单元测试，覆盖每行丑陋的代码。</li>
<li>然后分解函数，修改名称，消除重复，并且保持测试通过。</li>
</ul>
<h2 id="第四章-注释"><a href="#第四章-注释" class="headerlink" title="第四章 注释"></a>第四章 注释</h2><h3 id="尽量写为什么"><a href="#尽量写为什么" class="headerlink" title="尽量写为什么"></a>尽量写为什么</h3><p>注释尽量写为什么函数这么设计，而不是写这个函数有什么功能</p>
<h3 id="不要注释废弃代码"><a href="#不要注释废弃代码" class="headerlink" title="不要注释废弃代码"></a>不要注释废弃代码</h3><p>直接删除，通过git来记住被删除的代码</p>
<h3 id="确保注释描述了离他最近的代码"><a href="#确保注释描述了离他最近的代码" class="headerlink" title="确保注释描述了离他最近的代码"></a>确保注释描述了离他最近的代码</h3><h2 id="第五章-格式"><a href="#第五章-格式" class="headerlink" title="第五章 格式"></a>第五章 格式</h2><p>TODO：P93 垂直距离</p>
</div></div></article><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>