<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="地址："><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><title>基于万维网的电子邮件 | 凉薄的自动书记人偶</title><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><meta name="generator" content="Hexo 5.4.0"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Tags</a><a class="sidebar-nav-item" href="/About">About</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Computer-Network/" rel="tag">Computer Network</a></div><div class="post-time">2021-05-11</div></div></div><div class="container post-header"><h1>基于万维网的电子邮件</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE"><span class="toc-number">1.</span> <span class="toc-text">思维导图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E7%9A%84%E4%BF%A1%E6%81%AF%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.</span> <span class="toc-text">电子邮件的信息格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%BB%84%E6%88%90%E7%BB%93%E6%9E%84"><span class="toc-number">3.</span> <span class="toc-text">电子邮件系统的组成结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.</span> <span class="toc-text">电子邮件协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SMTP"><span class="toc-number">4.1.</span> <span class="toc-text">SMTP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B"><span class="toc-number">4.1.1.</span> <span class="toc-text">连接建立</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%82%AE%E4%BB%B6%E4%BC%A0%E9%80%81"><span class="toc-number">4.1.2.</span> <span class="toc-text">邮件传送</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E9%87%8A%E6%94%BE"><span class="toc-number">4.1.3.</span> <span class="toc-text">连接释放</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MIME%E2%80%94%E5%A4%9A%E7%94%A8%E9%80%94%E7%BD%91%E7%BB%9C%E9%82%AE%E4%BB%B6%E6%89%A9%E5%85%85"><span class="toc-number">4.2.</span> <span class="toc-text">MIME—多用途网络邮件扩充</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#POP3%E2%80%94%E9%82%AE%E5%B1%80%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.3.</span> <span class="toc-text">POP3—邮局协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IMAP%E2%80%94%E5%9B%A0%E7%89%B9%E7%BD%91%E6%8A%A5%E6%96%87%E5%AD%98%E5%8F%96%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.4.</span> <span class="toc-text">IMAP—因特网报文存取协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%87%E7%BB%B4%E7%BD%91%E7%9A%84%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">5.</span> <span class="toc-text">万维网的电子邮件</span></a></li></ol></details></div><div class="container post-content"><p>地址：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43914604/article/details/105896201">https://blog.csdn.net/weixin_43914604/article/details/105896201</a></li>
</ul>
<h2 id="思维导图"><a href="#思维导图" class="headerlink" title="思维导图"></a>思维导图</h2><p><img src="/images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70.png" alt="在这里插入图片描述"></p>
<h2 id="电子邮件的信息格式"><a href="#电子邮件的信息格式" class="headerlink" title="电子邮件的信息格式"></a>电子邮件的信息格式</h2><ul>
<li>一个电子邮件分为<code>信封</code>和<code>内容</code>两大部分，邮件内容又分为<code>首部</code>和<code>主体</code>两部分。</li>
<li>RFC 822规定了邮件的首部格式，而邮件的主体部分则让用户自由撰写。</li>
<li>用户写好首部后，邮件系统自动地将信封所需的信息提取出来并写在信封上，用户不需要亲自填写信封上的信息。</li>
<li>邮件内容的首部包含一些首部行，每个首部行由一个关键字后跟冒号再后跟值组成。有些关键字是必需的，有些则是可选的。最重要的关键字是To:和Subject。</li>
<li>To是必需的关键字，后面填入一个或多个收件人的电子邮件地址。<blockquote>
<p>电子邮件地址的规定格式为:收件人邮箱名@邮箱所在主机的域名。</p>
<p>如<a href="mailto:&#97;&#x62;&#99;&#64;&#99;&#x73;&#107;&#x61;&#x6f;&#x79;&#x61;&#110;&#46;&#99;&#x6f;&#109;">&#97;&#x62;&#99;&#64;&#99;&#x73;&#107;&#x61;&#x6f;&#x79;&#x61;&#110;&#46;&#99;&#x6f;&#109;</a>,其中收信人邮箱名即用户名，abc在cskaoyan.com这个邮件服务器上必须是唯一的 。这也就保证了<a href="mailto:&#x61;&#98;&#99;&#x40;&#x63;&#x73;&#107;&#x61;&#111;&#x79;&#x61;&#x6e;&#46;&#x63;&#x6f;&#109;">&#x61;&#98;&#99;&#x40;&#x63;&#x73;&#107;&#x61;&#111;&#x79;&#x61;&#x6e;&#46;&#x63;&#x6f;&#109;</a> 这个邮件地址在整个因特网上是唯一的。</p>
</blockquote>
</li>
<li>Subject是可选关键字，是邮件的主题，反映了邮件的主要内容。</li>
<li>还有一个必填的关键字是From,但它通常由邮件系统自动填入。</li>
<li>首部与主体之间用一个空行进行分割。典型的邮件内容如下:</li>
</ul>
<p><img src="/images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70-20210510220854939.png" alt="在这里插入图片描述"></p>
<h2 id="电子邮件系统的组成结构"><a href="#电子邮件系统的组成结构" class="headerlink" title="电子邮件系统的组成结构"></a>电子邮件系统的组成结构</h2><ul>
<li><p>电子邮件是一种异步通信方式，通信时不需要双方同时在场。</p>
</li>
<li><p>电子邮件把邮件发送到收件人使用的邮件服务器，并放在其中的收件人邮箱中，收件人可以随时上网到自己使用的邮件服务器进行读取。</p>
<p><img src="/images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70-20210510220916796.png" alt="在这里插入图片描述"></p>
</li>
</ul>
<p>一个电子邮件系统应具有三个最主要的组成构件：</p>
<ul>
<li>用户代理(User Agent)</li>
<li>邮件服务器</li>
<li>电子邮件使用的协议，如SMTP、POP3 (或IMAP)等。</li>
</ul>
<p><img src="/images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70-20210510220942671.png" alt="在这里插入图片描述"></p>
<p>用户代理(UA)：用户与电子邮件系统的接口。</p>
<ul>
<li>用户代理使用户能够通过一个很友好的接口发送和接收邮件，用户代理至少应当具有撰写、显示和邮件处理的功能。</li>
<li>通常情况下，用户代理就是一个运行在PC上的程序，常见的有Outlook、Foxmail 和Thunderbird等。</li>
</ul>
<p>邮件服务器：组成电子邮件系统的核心。</p>
<ul>
<li><p>邮件服务器的功能是发送和接收邮件，同时还要向发信人报告邮件传送的情况(已交付、被拒绝、丢失等)。</p>
</li>
<li><p>邮件服务器采用客户/服务器方式工作，但它能够同时充当客户和服务器。<br>例如，当邮件服务器A向邮件服务器B发送邮件时，A就作为SMTP客户，而B是SMTP服务器;反之，当B向A发送邮件时，B就是SMTP客户，而A就是SMTP服务器。</p>
</li>
</ul>
<p>邮件发送协议和读取协议:</p>
<ul>
<li>邮件发送协议用于<strong>用户代理向邮件服务器发送邮件</strong>或<strong>在邮件服务器之间发送邮件</strong>，通常使用的是SMTP;</li>
<li>邮件读取协议用于<strong>用户代理从邮件服务器读取邮件</strong>，如POP3。</li>
<li>SMTP采用的是“推”(Push)的通信方式，即在用户代理向邮件服务器发送邮件及在邮件服务器之间发送邮件时，SMTP客户端主动将邮件“推”送到SMTP服务器端。</li>
<li>POP3采用的是“拉”(Pull)的通信方式，即用户读取邮件时，用户代理向邮件服务器发出请求，“拉”取用户邮箱中的邮件。</li>
</ul>
<h2 id="电子邮件协议"><a href="#电子邮件协议" class="headerlink" title="电子邮件协议"></a>电子邮件协议</h2><h3 id="SMTP"><a href="#SMTP" class="headerlink" title="SMTP"></a>SMTP</h3><ul>
<li>SMTP规定了两个互相通信的SMTP进程之间应该如何交换信息。</li>
<li>负责发送邮件的SMTP进程就是SMTP客户，负责接收邮件的进程就是SMTP服务器。</li>
<li>SMTP规定了14条命令和21种应答信息。</li>
</ul>
<p><img src="/images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70-20210510221113165.png" alt="在这里插入图片描述"></p>
<h4 id="连接建立"><a href="#连接建立" class="headerlink" title="连接建立"></a>连接建立</h4><p><img src="/images/20200503104130598.png" alt="在这里插入图片描述"></p>
<ul>
<li><p>发件人的邮件发送到发送方邮件服务器的邮件缓存中后，SMTP客户就每隔一定时间对邮件缓存扫描一次。如发现有邮件，就使用SMTP的熟知端口号(25) 与接收方邮件服务器的SMTP服务器建立TCP连接。</p>
</li>
<li><p>连接建立后，接收方SMTP服务器发出220 Service ready (服务就绪)。然后SMTP客户向SMTP服务器发送HELLO命令，附上发送方的主机名。</p>
</li>
<li><p><strong>SMTP不使用中间邮件服务器</strong>。</p>
<p>TCP连接总是在发送方和接收方这两个邮件服务器之间直接建立，而不管它们相隔多远。接收方的邮件服务器因故障暂时不能建立连接时，发送方的邮件服务器只能等待一段时间后再次尝试连接。</p>
</li>
</ul>
<h4 id="邮件传送"><a href="#邮件传送" class="headerlink" title="邮件传送"></a>邮件传送</h4><p><img src="/images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70-20210510221156117.png" alt="在这里插入图片描述"></p>
<ul>
<li>连接建立后，就可开始传送邮件。邮件的传送从MAIL命令开始，MAIL 命令后面有发件人的地址。如<code>MAIL FROM: hoopdog@hust.edu.cn</code>。</li>
<li>若SMTP服务器已准备好接收邮件，则回答250 OK。</li>
<li>接着SMTP客户端发送一个或多个RCPT (收件人recipient的缩写)命令，格式为<code>RCPTTO: &lt;收件人地址&gt;</code>。<br>每发送一个 RCPT命令，都应有相应的信息从SMTP服务器返回，如250 OK或550 No such user here (无此用户)。<br>RCPT命令的作用是，<strong>先弄清接收方系统是否已做好接收邮件的准备，然后才发送邮件，以便不至于发送了很长的邮件后才知道地址错误，进而避免浪费通信资源。</strong></li>
<li>获得OK的回答后，客户端就使用DATA命令，表示要开始传输邮件的内容。<ul>
<li>正常情况下，SMTP服务器回复信息是354 Start mail input; end with . 。<code>&lt;CR&gt;&lt;LF&gt;</code>表示回车换行。</li>
<li>此时SMTP客户端就可开始传送邮件内容，</li>
<li>并用<code>&lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;</code>(两个回车，中间一个点)表示邮件内容的结束。</li>
</ul>
</li>
</ul>
<h4 id="连接释放"><a href="#连接释放" class="headerlink" title="连接释放"></a>连接释放</h4><ul>
<li>邮件发送完毕后，SMTP客户应发送<code>QUIT命令</code>。</li>
<li>SMTP服务器返回的信息是221 (服务关闭)，表示SMTP同意释放TCP连接。邮件传送的全部过程就此结束。</li>
</ul>
<h3 id="MIME—多用途网络邮件扩充"><a href="#MIME—多用途网络邮件扩充" class="headerlink" title="MIME—多用途网络邮件扩充"></a>MIME—多用途网络邮件扩充</h3><ul>
<li><p>由于SMTP只能传送一定长度的ASCII码，许多其他非英语国家的文字(如中文、俄文，甚至带重音符号的法文或德文)就无法传送，且无法传送可执行文件及其他二进制对象，因此提出了多用途网络邮件扩充( Multipurpose Internet MailExtensions，MIME)。</p>
</li>
<li><p>MIME并未改动SMTP或取代它。MIME的意图是继续使用目前的格式，但增加了邮件主体的结构，并定义了传送非ASCII码的编码规则。也就是说，MIME邮件可在现有的电子邮件程序和协议下传送。</p>
<p>MIME与SMTP的关系如图：</p>
<p><img src="/images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70-20210510221329262.png" alt="在这里插入图片描述"></p>
</li>
<li><p>MIME主要包括以下三部分内容:</p>
<ul>
<li>5个新的邮件首部字段，包括MIME版本、内容 描述、内容标识、内容传送编码和内容类型。</li>
<li>定义了许多邮件内容的格式，对多媒体电子邮件的表示方法进行了标准化。</li>
<li>定义了传送编码，可对任何内容格式进行转换，而不会被邮件系统改变。</li>
</ul>
</li>
</ul>
<h3 id="POP3—邮局协议"><a href="#POP3—邮局协议" class="headerlink" title="POP3—邮局协议"></a>POP3—邮局协议</h3><p><img src="/images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70-20210510221401614.png" alt="在这里插入图片描述"></p>
<ul>
<li>邮局协议( Post Office Protocol, POP) 是一个非常简单但功能有限的邮件读取协议，现在使用的是它的第3个版本POP3。</li>
<li>POP3 采用的是“拉”(Pull)的通信方式，当用户读取邮件时，用户代理向邮件服务器发出请求，“拉”取用户邮箱中的邮件。</li>
<li>POP也使用客户/服务器的工作方式，在传输层使用TCP,端口号为110。接收方的用户代理上必须运行POP客户程序，而接收方的邮件服务器上则运行POP服务器程序。</li>
<li>POP有两种工作方式:<code>下载并保留</code>和<code>下载并删除</code>。<ul>
<li>在“下载并保留”方式下，用户从邮件服务器上读取邮件后，邮件依然会保存在邮件服务器上，用户可再次从服务器上读取该邮件;</li>
<li>使用“下载并删除”方式时，邮件一旦被读取，就被从邮件服务器上删除，用户不能再次从服务器上读取。</li>
</ul>
</li>
</ul>
<h3 id="IMAP—因特网报文存取协议"><a href="#IMAP—因特网报文存取协议" class="headerlink" title="IMAP—因特网报文存取协议"></a>IMAP—因特网报文存取协议</h3><p><img src="/images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70-20210510221438078.png" alt="在这里插入图片描述"></p>
<ul>
<li>另一个邮件接收协议是因特网报文存取协议(IMAP),它比POP复杂得多，IMAP为用户提供了创建文件夹、在不同文件夹之间移动邮件及在远程文件夹中查询邮件的命令，为此IMAP服务器维护了会话用户的状态信息。</li>
<li>IMAP的另一特性是允许用户代理只获取报文的某些部分，例如可以只读取一个报文的首部,或一个多部分MIME报文的一部分。这非常适用于低带宽的情况，用户可能并不想取回邮箱中的所有邮件，尤其是包含很多音频或视频的大邮件。</li>
</ul>
<h2 id="万维网的电子邮件"><a href="#万维网的电子邮件" class="headerlink" title="万维网的电子邮件"></a>万维网的电子邮件</h2><p><img src="/images/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70-20210510221506752.png" alt="在这里插入图片描述"></p>
<p>随着万维网的流行，目前出现了很多基于万维网的电子邮件，如Hotmail、Gmail 等。<br>这种电子邮件的特点是，用户浏览器与Hotmail或Gmail的邮件服务器之间的邮件发送或接收使用的是HTTP，而仅在不同邮件服务器之间传送邮件时才使用SMTP.</p>
</div></div></article><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>